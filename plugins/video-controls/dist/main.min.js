define("modules/eventHandler",[],(function(){var e=function(e){this.vc=e};return e.prototype.registerPlaybackEvent=function(e,t){e.on("play",this.handlePlayStart.bind(this,t,e))},e.prototype.handlePlayStart=function(e,t){this.vc.pauseOtherVideos(e);var i=this.vc.videos[e].triggers;i&&i.length>0&&i.forEach(this.registerTriggers.bind(this,t))},e.prototype.registerTriggers=function(e,t){this.vc.getValueArrayFromTags(t,"at").forEach(this.addTriggerAction.bind(this,t,e))},e.prototype.addTriggerAction=function(e,t,i){"end"===i?this.addTriggerOnVideoEnd(t,e):isNaN(i)||this.addTriggerOnTimeInterval(t,e,i)},e.prototype.addTriggerOnTimeInterval=function(e,t,i){i=Math.round(parseFloat(i)),e.on("timeupdate",this.dispatchEventOnTimeStamp.bind(this,i,t,e))},e.prototype.dispatchEventOnTimeStamp=function(e,t,i){Math.round(i.currentTime())==e&&t.click()},e.prototype.addTriggerOnVideoEnd=function(e,t){e.on("ended",this.dispatchEventOnVideoEnded.bind(this,t))},e.prototype.dispatchEventOnVideoEnded=function(e){e.click()},e})),define("modules/domObserver",["modules/eventHandler"],(function(e){function t(e,t){this.node=e,this.name=t}return t.prototype.findVideoPlayer=function(e,t){for(var i=0;i<e.length;i++){var o=e[i];if("childList"===o.type){var n=o.addedNodes;for(i=0;i<n.length;i++)"DIV"===n[i].nodeName&&node.classList.indexOf("video-js")>-1&&(t.disconnect(),this.player=n[i],this.setupPlayerSettings())}}},t.prototype.updateVideoSettings=function(e){this.vc=e;var t=this.vc.getPlayer(this.name);(this.player=t||"",this.player)?this.setupPlayerSettings():new MutationObserver(this.findVideoPlayer).observe(this.node,{childList:!0})},t.prototype.setupPlayerSettings=function(){this.vc.videos[this.name].player=this.player,new e(this.vc).registerPlaybackEvent(this.player,this.name),this.applyPlayerVideoSettings()},t.prototype.applyPlayerVideoSettings=function(){this.vc.videos[this.name].settings.forEach(this.setAttributeFunctionality.bind(this))},t.prototype.setAttributeFunctionality=function(e){"loop"===e?this.player.loop(!0):"hide-controls"===e&&(this.player.controls(!1),this.player.bigPlayButton.hide())},t})),define("modules/videoController",["modules/domObserver"],(function(e){var t=function(e,t,i){this.videoComponents=e.components,this.experience=t,this.EventHandler=i,this.videos={},this.controls={},this.triggers={},this.pendingCommands={},this.getControls(),this.getTriggers(),this.videoComponents.forEach(this.initVideoConfig.bind(this))};return t.prototype.initVideoConfig=function(e){var t=this.getValueArrayFromTags(e,"name")[0],i=this.getValueArrayFromTags(e,"do");this.videos[t]={id:e.id,settings:i,triggers:this.triggers[t]},this.findVideoContainer(e,t)},t.prototype.getTriggers=function(){this.experience.findComponentsByTag("trigger").components.forEach(function(e){var t=this.getValueArrayFromTags(e,"target")[0];this.triggers[t]=this.triggers[t]||[],this.triggers[t].push(e)}.bind(this))},t.prototype.getControls=function(){this.experience.findComponentsByTag("video-control").components.forEach(function(e){var t=this.getValueArrayFromTags(e,"target")[0],i=this.getValueArrayFromTags(e,"event")[0];this.controls[i]=this.controls[i]||{},this.controls[i][t]=e}.bind(this))},t.prototype.findVideoContainer=function(t,i){var o=setInterval(function(){var n=document.getElementById(t.id);n&&(clearInterval(o),this.videos[i].container=n,this.triggerPendingCommands(i),new e(n,i).updateVideoSettings(this))}.bind(this),100)},t.prototype.getValueArrayFromTags=function(e,t){for(var i=e.getTags(),o=[],n=0;n<i.length;n++){var r=i[n];if(r.indexOf(t+":")>-1){var s=r.split(":")[1];o.push(s.trim())}}return o},t.prototype.getPlayer=function(e){if(this.videos.hasOwnProperty(e)&&this.videos[e].player)return this.videos[e].player;try{var t=this.videos[e].container;return t?this.storePlayer(t,e):null}catch(e){console.log(e)}},t.prototype.storePlayer=function(e,t){for(var i=e.children,o=0;o<i.length;o++){var n=i[o];if("DIV"===n.nodeName&&n.classList.contains("video-js"))return this.videos[t].player=n.player,n.player}},t.prototype.playVideo=function(e){e.play()},t.prototype.muteVideoByName=function(e){this.getPlayer(e).muted(!0)},t.prototype.pauseVideo=function(e){e.pause()},t.prototype.toggleMute=function(e){e.muted(!e.muted())},t.prototype.togglePlayback=function(e){e.paused()?this.playVideo(e):this.pauseVideo(e)},t.prototype.resetVideo=function(e){e.currentTime(0),this.pauseVideo(e)},t.prototype.pauseAllVideos=function(){for(var e in this.videos){var t=this.getPlayer(e);t&&t.ready&&this.pauseVideo(t)}},t.prototype.pauseOtherVideos=function(e){for(var t in this.videos)if(t!==e){var i=this.videos[t].player;i&&!i.paused()&&(this.hasVideoControl("toggle-playback",t)?this.clickControl("toggle-playback",t):this.hasVideoControl("pause",t)?this.clickControl("pause",t):this.pauseVideo(i))}},t.prototype.hasVideoControl=function(e,t){return!!this.controls[e][t]},t.prototype.clickControl=function(e,t){this.controls[e][t].click()},t.prototype.triggerEvent=function(e,t){try{switch(t){case"play":this.playVideo(e);break;case"pause":this.pauseVideo(e);break;case"toggle-mute":this.toggleMute(e);break;case"toggle-playback":this.togglePlayback(e);break;case"reset":this.resetVideo(e);break;case"pause-all":this.pauseAllVideos()}}catch(e){console.log(e)}},t.prototype.registerEvent=function(e,t,i){null===e?(this.pendingCommands[t]=this.pendingCommands[t]||[],this.pendingCommands[t].push(i)):e&&this.triggerEvent(e,i)},t.prototype.dispatchEvent=function(e){var t=this.getValueArrayFromTags(e,"event")[0],i=this.getValueArrayFromTags(e,"target")[0];if("pause-all"===t)this.pauseAllVideos();else{var o=this.getPlayer(i);this.registerEvent(o,i,t)}},t.prototype.triggerPendingCommands=function(e){var t=this.getPlayer(e);if(t){var i=this.pendingCommands[e];if(i&&i.length>0)i.slice().forEach(this.triggerEvent.bind(this,t))}},t.prototype.isPlaying=function(e){return e.readyState?!!(e.currentTime>0&&!e.seeking&&!e.paused&&!e.ended&&e.readyState>2):!(!(e.currentTime>0)||e.seeking||e.paused||e.ended)},t})),function(){var e=document.getElementById("ceros-video-plugin").getAttribute("src");if(void 0!==e&&new URL(e))var t=new URL(e),i=t.pathname.split("/").slice(0,-1).join("/")+"/",o=t.origin+i;else o="./";require.config({paths:{CerosSDK:"//sdk.ceros.com/standalone-player-sdk-v5.min",modules:o+"modules"}}),require(["CerosSDK","modules/videoController","modules/eventHandler"],(function(e,t,i){e.findExperience().fail((function(e){console.error(e)})).done((function(o){var n,r=o.findComponentsByTag("video"),s=o.findComponentsByTag("video-control"),a="ceros-debug";s.on(e.EVENTS.CLICKED,(function(e){n.dispatchEvent(e)})),o.on(e.EVENTS.PAGE_CHANGED,(function(e){n=n||new t(r,e.experience,i),function(){if(new URLSearchParams(location.search).has(a))return!0}()&&console.log(n)}))}))}))}(jQuery),define("main",(function(){}));