"use strict";define("modules/constants",["require","exports"],function(S,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_IMAGE=i.TAB=i.FUSE_TYPE_INFO=i.FUSE_STYLE_INFO=i.PATH1=i.PATH2=i.IMG_LRG=i.MCASE_ADAPTER=i.MAX_TABS=i.MAX_RESULTS=i.MAX_ACCESSORIES=i.MAX_RELATED_PRODUCTS=i.DIVIDER=i.SEGMENTS=i.PARTS=i.RESULTS=i.ACCESSORIES=i.RELATED_PRODUCTS=i.NAV=i.BACK=i.PATH=i.PRODUCT_GUIDE=i.BUY_NOW=i.PRINT=i.DATASHEET=i.DESCRIPTION=i.IMAGE=i.PART=i.SERIES=i.SPECS=i.DELIMETER=i.RESET=i.QUESTION=i.OPTION=i.fieldNodesDict=i.path1Fields=i.path2Fields=i.transitionFields=void 0,i.transitionFields={"fuse type":"fuse type-path2","fuse style":"fuse style-path2","max voltage":"max voltage-path2","max current":"max current-path2"},i.path2Fields=["fuse type","application voltage","application load","application amps","fuse style-path2"],i.path1Fields=["fuse type","fuse style","max voltage","max current","circuit option","style","mounting method","protection","part"],i.fieldNodesDict={"application voltage":{type:"question",pathText:"Voltage: {{}}"},"application load":{type:"question",pathText:"Load: {{}}",questionStrategy:"masking",multiValue:!0},"application amps":{type:"question",pathText:"Amps: {{}}",questionStrategy:"slider"},"fuse style-path2":{type:"question",pathText:"Style: {{}}",questionStrategy:"segments"},"max voltage-path2":{type:"question",pathText:"Volts: <={{}}V DC",breakKeys:!0},"max current-path2":{type:"question",pathText:"Amps: {{}}A",breakKeys:!0},"fuse type":{type:"question",pathText:"Fuse Type: {{}}"},"fuse type-path2":{type:"question",pathText:"{{}}"},"fuse style":{type:"question",pathText:"Fuse Style: {{}}",questionStrategy:"masking-with-subcategories"},"max voltage":{type:"question",pathText:"Volts: {{}}V DC",questionStrategy:"hiding"},"max current":{type:"question",pathText:"Amps: {{}}A",questionStrategy:"hiding"},"circuit option":{type:"question",pathText:"Circuit: {{}}",questionStrategy:"masking"},style:{type:"question",pathText:"Style: {{}}",questionStrategy:"masking",skipif:["PCBA","Fuse Block"]},"mounting method":{type:"question",pathText:"Mounting: {{}}",questionStrategy:"masking-with-subcategories",skipBackIf:{style:["PCBA","Fuse Block"]}},protection:{type:"question",pathText:"Protection: {{}}",questionStrategy:"masking"},part:{type:"result",pathText:""}},i.OPTION="answer",i.QUESTION="q",i.RESET="reset",i.DELIMETER=":",i.SPECS="specs",i.SERIES="series",i.PART="part",i.IMAGE="img",i.DESCRIPTION="description",i.DATASHEET="datasheet",i.PRINT="2d print",i.BUY_NOW="buy-now",i.PRODUCT_GUIDE="product guide",i.PATH="path",i.BACK="back",i.NAV="nav",i.RELATED_PRODUCTS="related products",i.ACCESSORIES="accessories",i.RESULTS="module",i.PARTS="part module",i.SEGMENTS="segment",i.DIVIDER=";",i.MAX_RELATED_PRODUCTS=2,i.MAX_ACCESSORIES=4,i.MAX_RESULTS=5,i.MAX_TABS=4,i.MCASE_ADAPTER="mcase-adapter",i.IMG_LRG="img lrg",i.PATH2="path2",i.PATH1="path1",i.FUSE_STYLE_INFO="fuse style info",i.FUSE_TYPE_INFO="fuse type info",i.TAB="tab",i.DEFAULT_IMAGE="https://ceros-projects.s3.us-east-2.amazonaws.com/littlefuse/fuse-holders/Image+Not+Available.jpg"}),define("modules/lib/Node",["require","exports"],function(S,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Node=void 0;class r{constructor(c,o="",s=null){this.name=c,this.value=o,this.parent=s,this.children=[],this.elementId="",this.data={}}findChildByValueProperty(c){return this.children.find(o=>o.value.toLowerCase()===c.toLowerCase())||null}findChildThatIncludesValue(c){return this.children.find(o=>o.value.toLowerCase()===c.toLowerCase())||null}findAllChildrenThatIncludeValue(c){return this.children.filter(o=>o.value.toLowerCase()===c.toLowerCase())||null}findParentByName(c){let o=this;for(;o;){if(o.name===c)return o;o=o.parent}}getPath(){const c=[];let o=this;for(;o;)c.unshift({name:o.name,value:o.value}),o=o.parent;return c}}i.Node=r}),define("modules/lib/treeHelpers",["require","exports","../constants"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MERGE_FIELDS_P1=void 0,i.makeKey=c,i.makeKeys=s,i.getChildrenByPath=e,i.getP1MergeValsFromP2Node=l,i.MERGE_FIELDS_P1=["fuse type","fuse style","max voltage","max current"];function g(t){return(t??"").trim().toLowerCase().replace(/\s+/g," ")}function c(t,a){return a.map(d=>g(t[d])||"\u2205").join("|")}function o(t,a,d=","){const u=Object.entries(t);let h=[{}];for(const[p,f]of u){const m=a[r.transitionFields[p]],y=f??"";h=(m?.breakKeys&&y.includes(d)?y.split(d).map(T=>T.trim()).filter(Boolean):[y]).flatMap(T=>h.map(b=>Object.assign(Object.assign({},b),{[p]:T})))}return h}function s(t,a,d){const u=[];return Object.keys(t).filter(f=>d[r.transitionFields[f]].breakKeys).length?o(t,d,",").forEach(m=>u.push(c(m,a))):u.push(c(t,a)),u}function e(t,a){const d=t.split("|");return n(0,a,d,[])}function n(t,a,d,u){return t===i.MERGE_FIELDS_P1.length?a.children:(a.findAllChildrenThatIncludeValue(d[t]).forEach(p=>{u=u.concat(n(t+1,p,d,u))}),u)}function l(t,a){const d={};for(const u of i.MERGE_FIELDS_P1){const h=a[u]||u,p=t.data[h];if(!p)return null;d[u]=p}return d}}),define("modules/lib/NodeTree",["require","exports","./Node","./treeHelpers","./treeHelpers"],function(S,i,r,g,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NodeTree=void 0;class o{constructor(e){this.fields=e,this.root=new r.Node("Root")}buildTree(e,n){e.forEach(l=>{this.addBranch(this.root,l,n)}),console.log(this.root)}addNewNode(e,n,l,t={}){const a=l.findChildByValueProperty(e);if(a)return a;{const d=new r.Node(n,e,l);return d.data=t,l.children.push(d),d}}addBranch(e,n,l){var t,a;let d=e;for(let u=0;u<l.length;u++){const h=l[u].trim(),p=(a=(t=n[h])===null||t===void 0?void 0:t.trim)===null||a===void 0?void 0:a.call(t);if(p){if(this.fields[h].multiValue){const f=l.slice(u+1);n[h].split(",").map(y=>y.trim()).forEach(y=>{let C;this.fields[h].type==="result"||this.fields[h].questionStrategy==="segments"||u===l.length-1?C=this.addNewNode(y,h,d,n):C=this.addNewNode(y,h,d),this.addBranch(C,n,f)});return}this.fields[h].type==="result"||this.fields[h].questionStrategy==="segments"||u===l.length-1?d=this.addNewNode(p,h,d,n):d=this.addNewNode(p,h,d)}}}mergeNodes(e,n,l){const t=(0,c.getP1MergeValsFromP2Node)(e,n);if(t){const a=(0,g.makeKeys)(t,g.MERGE_FIELDS_P1,this.fields);let d=[];a.forEach(u=>{const h=(0,g.getChildrenByPath)(u,l.root);d=[...d,...h]}),this.attachNewChildren(d,e)}}attachNewChildren(e,n){!e||e.length===0||e.forEach(l=>{const t=this.addNewNode(l.value,l.name,n,l.data),a=l.children;this.attachNewChildren(a,t)})}mergeDataWithFields(e,n,l){const t=a=>{if(a.children.length===0){this.mergeNodes(a,l,e);return}for(const d of a.children)t(d)};for(const a of n.children)t(a)}findChild(e,n,l){return e.children.find(t=>t[n].toLowerCase()===l.toLowerCase().trim())}}i.NodeTree=o}),define("modules/Observer",["require","exports"],function(S,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NonStrictObservable=i.Observable=i.Observer=void 0;class r{constructor(){this.subscribers=new Set}subscribe(s){this.subscribers.add(s)}notify(s){this.subscribers.forEach(e=>e(s))}}i.Observer=r;class g extends r{constructor(s){super(),this._value=s}get value(){return this._value}set value(s){this._value!==s&&(this._value=s,this.notify(this._value))}}i.Observable=g;class c extends r{constructor(s){super(),this._value=s}get value(){return this._value}set value(s){this._value=s,this.notify(this._value)}}i.NonStrictObservable=c}),define("modules/utils",["require","exports","./constants"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.setImageUrl=i.getModuleTag=i.stepsFromFieldNames=i.capitalize=i.getValueFromTags=void 0;const g=(n,l,t=r.DELIMETER)=>{const a=n.find(d=>d.trim().startsWith(`${l}${t}`));return a?a.split(r.DELIMETER)[1].trim():""};i.getValueFromTags=g;const c=n=>n?n.split(" ").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):"";i.capitalize=c;const o=(n,l)=>{const t=n.map(a=>[a,l[a]]);return Object.fromEntries(t)};i.stepsFromFieldNames=o;const s=(n,l,t)=>n>1?`${n}-${t}-${l+1}`:`${n}-${t}`;i.getModuleTag=s;const e=(n,l)=>{try{new URL(n),l.setUrl(n)}catch(t){console.error(t),l.setUrl(r.DEFAULT_IMAGE)}};i.setImageUrl=e}),define("modules/DoubleClickBugHandler",["require","exports"],function(S,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DoubleClickBugHandler=void 0;class r{constructor(){this.clickObjectTimeTracker={}}isDoubleClickBug(c){const o=Date.now(),s=this.clickObjectTimeTracker[c];if(this.clickObjectTimeTracker[c]=o,s){const e=o-s;return console.log(e),e<900}}}i.DoubleClickBugHandler=r}),define("modules/LandinPageProxy",["require","exports","./DoubleClickBugHandler"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.LandingPageProxy=void 0;class g{constructor(){this.windowObjectReference=null,this.doubleClickBugHandler=new r.DoubleClickBugHandler,this.isPreview=window.self==window.top&&window.location.hostname.includes(".preview.ceros")}sendUAEvent(o){if(window.self!==window.top){const s={event_category:"CEROS",event_label:o,event_action:"outbound_link_click"};parent.postMessage(JSON.stringify(s),"*")}else window.dataLayer.push({event:"ceros-event",cerosAction:"ceros_outbound_link_click",cerosCategory:"CEROS",cerosLabel:o}),this.openRequestedSingleTab(o)}openRequestedSingleTab(o){this.windowObjectReference===null||this.windowObjectReference.closed?this.windowObjectReference=window.open(o,"_blank"):(this.windowObjectReference=window.open(o,"_blank"),this.windowObjectReference.focus())}openAndTrackLink(o,s){this.doubleClickBugHandler.isDoubleClickBug(s)||(this.isPreview?this.openRequestedSingleTab(o):this.sendUAEvent(o))}}i.LandingPageProxy=g}),define("modules/moduleStrategies/ModuleHandler",["require","exports","../utils","../DoubleClickBugHandler"],function(S,i,r,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ModuleHandler=void 0;class c{constructor(s,e,n){this.moduleName=s,this.experience=e,this.CerosSDK=n,this.moduleDict={},this.isNew=!1,this.doubleClickBugHandler=new g.DoubleClickBugHandler}static handleModuleImage(s,e){const n=e.image;(0,r.setImageUrl)(n,s)}updateModule(s,e,n,l){const t=(0,r.getModuleTag)(s,e,this.moduleName),a=this.experience.findLayersByTag(t);if(!a.layers.length){console.error(`No module found with tag: ${t}`);return}const u=a.layers[0].findAllComponents().layersByTag,h=s.toString();this.moduleDict[h]=this.moduleDict[h]||{},this.isNew=!this.moduleDict[h][t],this.moduleDict[h][t]||(this.moduleDict[h][t]={data:{},layers:{}}),this.moduleDict[h][t].data=n,this.moduleDict[h][t].layers=u,this.processLayers(u,t),l&&l(u,t),console.log(this.moduleDict),a.show()}showImageFromUrl(s,e,n,l){n.forEach(t=>{const a=this.getResultData(s);e(t,a.data),this.isNew&&t.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,d=>{const u=this.getResultData(s);e(d,u.data)}),l&&this.isNew&&t.on(this.CerosSDK.EVENTS.CLICKED,d=>{l(s)})})}updateResultTextbox(s,e,n,l){n.forEach(t=>{const a=this.getResultData(e),d=l?l(a.data[s]):a.data[s];t.setText(d),this.isNew&&t.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,u=>{const h=this.getResultData(e),p=l?l(h.data[s]):h.data[s];u.setText(p)})})}getResultData(s){const e=s.split("-")[0];return this.moduleDict[e][s]}}i.ModuleHandler=c}),define("modules/moduleStrategies/ProductModuleHandler",["require","exports","../constants","./ModuleHandler","../utils"],function(S,i,r,g,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ProductModuleHandler=void 0;class o extends g.ModuleHandler{constructor(e,n,l,t,a,d){super(e,n,l),this.distributor=t,this.landingPageProxy=a,this.imgLrgLink=d,this.imgLargeHotspotCollection=this.experience.findComponentsByTag(`${r.IMG_LRG}-1`)}hideModule(e,n){const l=(0,c.getModuleTag)(e,n,this.moduleName),t=this.experience.findLayersByTag(l);if(!t.layers.length){console.error(`No module found with tag: ${l}`);return}t.hide()}processLayers(e,n){e[r.IMAGE]&&this.showImageFromUrl(n,g.ModuleHandler.handleModuleImage,e[r.IMAGE],this.imageClickCallback.bind(this)),e[r.PART]&&this.updateResultTextbox(r.PART,n,e[r.PART]),e[r.SERIES]&&this.updateResultTextbox(r.SERIES,n,e[r.SERIES]),e[r.DATASHEET]&&this.registerResultClcikEvent(e[r.DATASHEET],r.DATASHEET,n),e[r.PRINT]&&this.registerResultClcikEvent(e[r.PRINT],r.PRINT,n),e[r.BUY_NOW]&&this.registerResultClcikEvent(e[r.BUY_NOW],this.distributor,n),e[r.PRODUCT_GUIDE]&&this.registerResultClcikEvent(e[r.PRODUCT_GUIDE],r.PRODUCT_GUIDE,n),e[r.SPECS]&&this.updateResultTextbox(r.SPECS,n,e[r.SPECS]),e[r.DESCRIPTION]&&this.updateResultTextbox(r.DESCRIPTION,n,e[r.DESCRIPTION])}imageClickCallback(e){const n=this.getResultData(e);this.imgLrgLink.value=n.data.image,this.imgLargeHotspotCollection.click()}registerResultClcikEvent(e,n,l){e.forEach(t=>{t.on(this.CerosSDK.EVENTS.CLICKED,()=>{const a=this.getResultData(l);this.landingPageProxy.openAndTrackLink(a.data[n],t.id)}),t.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,a=>{this.getResultData(l).data[n]||a.hide()})})}}i.ProductModuleHandler=o}),define("modules/Carousel",["require","exports","./Observer","./DoubleClickBugHandler"],function(S,i,r,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Carousel=void 0;class c{constructor(s,e,n,l,t){this.max=s,this.name=e,this.CerosSDK=n,this.experience=l,this.moduleHandler=t,this.currentPage=new r.Observable(0),this.parts=[],this.next=this.experience.findLayersByTag(`${this.name}-next`),this.back=this.experience.findLayersByTag(`${this.name}-back`),this.currentIndex=this.experience.findComponentsByTag(`${this.name}-current`),this.totalIndex=this.experience.findComponentsByTag(`${this.name}-total`),this.pages={},this.doubleClickBugHandler=new g.DoubleClickBugHandler,this.registerNavigationEvents()}init(s){this.pages={},this.parts=s,this.paginate(),this.setTotalPageIndex(),this.currentPage.value=1}paginate(){let s=0,e=1;for(;s<this.parts.length;){const n=s+this.max<this.parts.length?s+this.max:this.parts.length;this.pages[e]=this.parts.slice(s,n),s=s+this.max,e++}console.log(this.pages)}registerNavigationEvents(){this.next.on(this.CerosSDK.EVENTS.CLICKED,s=>{this.doubleClickBugHandler.isDoubleClickBug(s.id)||(this.currentPage.value++,console.log(this.currentPage.value))}),this.back.on(this.CerosSDK.EVENTS.CLICKED,s=>{this.doubleClickBugHandler.isDoubleClickBug(s.id)||this.currentPage.value--}),this.next.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,()=>{this.isLastPage()&&this.next.hide()}),this.back.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,()=>{this.isFirstPage()&&this.back.hide()}),this.currentPage.subscribe(()=>{this.hideModules(),this.updatePageIndex(),this.populate(),this.isLastPage()?this.next.hide():this.next.show(),this.isFirstPage()?this.back.hide():this.back.show()})}populate(){let s=0;const e=this.pages[this.currentPage.value];for(;s<this.max&&s<e.length;){const n=e[s];n&&this.moduleHandler.updateModule(this.max,s,n),s++}}hideModules(){let s=0;for(;s<this.max;)this.moduleHandler.hideModule(this.max,s),s++}updatePageIndex(){this.currentIndex.components.forEach(s=>s.setText(this.currentPage.value.toString()))}setTotalPageIndex(){const s=Object.keys(this.pages);this.totalIndex.components.forEach(e=>e.setText(s[s.length-1]))}isLastPage(){const s=Object.keys(this.pages);return this.currentPage.value===Number(s[s.length-1])}isFirstPage(){return this.currentPage.value===1}}i.Carousel=c}),define("modules/moduleStrategies/NavModuleHandler",["require","exports","./ModuleHandler"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NavModuleHandler=void 0;class g extends r.ModuleHandler{constructor(o,s,e,n,l){super(o,s,e),this.currentSegment=n,this.textFormat=l}processLayers(o,s){o.name&&this.updateResultTextbox("name",s,o.name,this.textFormat),o.cta&&this.registerTabChangeCta("name",s,o.cta)}selectTab(o,s){const e=this.moduleDict[s];for(const n in e){const l=e[n];l.data.name===o&&l.layers.cta.forEach(t=>{t.click(),console.log(`clicked ${o}`)})}}registerTabChangeCta(o,s,e){e.forEach(n=>{n.on(this.CerosSDK.EVENTS.CLICKED,l=>{if(this.doubleClickBugHandler.isDoubleClickBug(l.id))return;const t=this.getResultData(s);this.currentSegment.value=t.data[o]})})}}i.NavModuleHandler=g}),define("modules/moduleStrategies/TabNavHandler",["require","exports","./NavModuleHandler","../Observer","../constants"],function(S,i,r,g,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TabNavHandler=void 0;class o{constructor(e,n,l,t,a,d,u){this.experience=e,this.CerosSDK=n,this.showResultModule=l,this.tabTag=t,this.tabTextTag=a,this.tabKey=d,this.textFormat=u,this.segments={},this.currentSegment=new g.NonStrictObservable(""),this.navModuleHandler=new r.NavModuleHandler(t,e,n,this.currentSegment,this.textFormat),this.tabTextComponentCollection=e.findComponentsByTag(a),this.subscribeToSegmentChange()}init(e){this.segments={},this.mapSegments(e.children)}subscribeToSegmentChange(){this.currentSegment.subscribe(this.displayModules.bind(this)),this.currentSegment.subscribe(this.updateFuseTypeInfo.bind(this))}display(){this.updateNavigation(),this.triggerHotspot(this.tabTag,Object.keys(this.segments).length,3);const e=Object.keys(this.segments)[0];this.navModuleHandler.selectTab(e,Object.keys(this.segments).length.toString())}mapSegments(e){e.forEach(n=>{const l=n.data[this.tabKey].trim();this.segments[l]=this.segments[l]||{},this.segments[l].nodes=this.segments[l].nodes||[],this.segments[l].nodes.push(n)})}displayModules(){const e=this.segments[this.currentSegment.value]?this.segments[this.currentSegment.value].nodes.length:0;e?this.showResultModule(e,this.segments[this.currentSegment.value].nodes):console.log("No options in segement "+this.currentSegment.value)}updateFuseTypeInfo(){const e=this.segments[this.currentSegment.value].nodes[0].data[this.tabTextTag];this.tabTextComponentCollection.setText(e)}updateNavigation(){const e=Object.keys(this.segments).length;e&&(this.updateNavModules(e),this.triggerHotspot(this.tabTag,e,c.MAX_TABS))}updateNavModules(e){Object.keys(this.segments).forEach((l,t)=>{this.navModuleHandler.updateModule(e,t,{name:l})})}triggerHotspot(e,n,l){this.experience.findComponentsByTag(`${e}-${n<=l?n:`${l+1}+`}`).click()}isOneTab(e){const n=e[0].data[this.tabKey];return e.every(l=>l.data[this.tabKey]===n)}}i.TabNavHandler=o});var __awaiter=this&&this.__awaiter||function(S,i,r,g){function c(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function e(t){try{l(g.next(t))}catch(a){s(a)}}function n(t){try{l(g.throw(t))}catch(a){s(a)}}function l(t){t.done?o(t.value):c(t.value).then(e,n)}l((g=g.apply(S,i||[])).next())})};define("modules/ResultHandler",["require","exports","./constants","./LandinPageProxy","./moduleStrategies/ProductModuleHandler","./DoubleClickBugHandler","./Carousel","./moduleStrategies/TabNavHandler"],function(S,i,r,g,c,o,s,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ResultHandler=void 0;class n{constructor(t,a,d,u,h,p,f,m){this.experience=t,this.CerosSDK=a,this.currentNodeObservable=d,this.distributor=u,this.relatedProductsLink=h,this.accessoriesLink=p,this.PapaParse=f,this.imgLrgLink=m,this.csvData={"related products":{},accessories:{}},this.doubleClickBugHandler=new o.DoubleClickBugHandler,this.pathNavigationCollection=t.findLayersByTag(`nav:${r.PART}`),this.landingPageProxy=new g.LandingPageProxy,this.resultModulesHandler=new c.ProductModuleHandler(r.RESULTS,t,a,u,this.landingPageProxy,this.imgLrgLink),this.relatedProductsModulesHandler=new c.ProductModuleHandler(r.RELATED_PRODUCTS,t,a,u,this.landingPageProxy,this.imgLrgLink),this.accessoriesModulesHandler=new c.ProductModuleHandler(r.ACCESSORIES,t,a,u,this.landingPageProxy,this.imgLrgLink),this.accessoriesCarousel=new s.Carousel(r.MAX_ACCESSORIES,r.ACCESSORIES,a,t,this.accessoriesModulesHandler),this.relatedProductsCarousel=new s.Carousel(r.MAX_RELATED_PRODUCTS,r.RELATED_PRODUCTS,a,t,this.relatedProductsModulesHandler),this.resultsCarousel=new s.Carousel(r.MAX_RESULTS,r.RESULTS,a,t,this.resultModulesHandler),this.tabNavHandler=new e.TabNavHandler(this.experience,this.CerosSDK,this.showPath2Results.bind(this),r.TAB,"","max current",this.formatTabText)}formatTabText(t){return`${t}A`}displayPathNavigation(t){this.pathNavigationCollection.layers.forEach(a=>{a.getPayload().trim()===t?a.show():a.hide()})}showResultModule(t,a){a===r.PATH2?(this.tabNavHandler.init(this.currentNodeObservable.value),this.tabNavHandler.isOneTab(this.currentNodeObservable.value.children)&&this.showPath1Results(t),this.tabNavHandler.display()):this.showPath1Results(t)}showPath1Results(t){this.updateResultModules(t,this.currentNodeObservable.value.children),this.triggerHotspot(r.RESULTS,t,r.MAX_RESULTS)}showPath2Results(t,a){this.updateResultModules(t,a),this.triggerHotspot(r.RESULTS,t,r.MAX_RESULTS)}sortNodesBySales(t){return t.sort((a,d)=>{const u=isNaN(Number(a.data.sales))?0:Number(a.data.sales);return(isNaN(Number(d.data.sales))?0:Number(d.data.sales))-u})}updateResultModules(t,a){const d=this.sortNodesBySales(a);d.length<=r.MAX_RESULTS?d.forEach((u,h)=>{this.resultModulesHandler.updateModule(t,h,u.data,this.processOverlayLayers.bind(this))}):this.resultsCarousel.init(d.map(u=>u.data))}processOverlayLayers(t,a){t[r.RELATED_PRODUCTS]&&this.handleOverlay(r.RELATED_PRODUCTS,t[r.RELATED_PRODUCTS],a,this.relatedProductsLink),t[r.ACCESSORIES]&&this.handleOverlay(r.ACCESSORIES,t[r.ACCESSORIES],a,this.accessoriesLink)}updateRelatedProductsModules(t){t.length<=r.MAX_RELATED_PRODUCTS?t.forEach((a,d)=>{this.relatedProductsModulesHandler.updateModule(t.length,d,a)}):this.relatedProductsCarousel.init(t)}updateAccessoriesModules(t){t.length<=r.MAX_ACCESSORIES?t.forEach((a,d)=>{this.accessoriesModulesHandler.updateModule(t.length,d,a)}):this.accessoriesCarousel.init(t)}handleOverlay(t,a,d,u){a.forEach(h=>{this.registerOverlayAnimation(h,d,t),this.registerOverlayClick(h,d,t,u)})}registerOverlayAnimation(t,a,d){t.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,u=>{if(this.getPartNumbers(a,d).length===0)u.hide();else if(d===r.ACCESSORIES){const p=!!this.getPartNumbers(a,r.RELATED_PRODUCTS).length,f=!!this.getValue(a,r.PRODUCT_GUIDE);p||f?u.getTags().find(m=>m==="pos:1")&&u.hide():u.getTags().find(m=>m==="pos:2")&&u.hide()}})}registerOverlayClick(t,a,d,u){t.on(this.CerosSDK.EVENTS.CLICKED,h=>__awaiter(this,void 0,void 0,function*(){if(this.doubleClickBugHandler.isDoubleClickBug(h.id))return;const p=this.getPartNumbers(a,d);if(!p.length)return;yield this.loadCsvData(d,u);const f=this.getExistingParts(d,p);f.length&&(d===r.RELATED_PRODUCTS?(this.updateRelatedProductsModules(f),this.triggerHotspot(d,f.length,r.MAX_RELATED_PRODUCTS)):d===r.ACCESSORIES&&(this.updateAccessoriesModules(f),this.triggerHotspot(d,f.length,r.MAX_ACCESSORIES)))}))}triggerHotspot(t,a,d){this.experience.findComponentsByTag(`${t}-${a<=d?a:`${d+1}+`}`).click()}getPartNumbers(t,a){const d=this.getValue(t,a);return d?d.split(r.DIVIDER).map(u=>u.replace(" ","")):[]}getValue(t,a){return this.resultModulesHandler.getResultData(t).data[a]}getExistingParts(t,a){const d=[];return a.forEach(u=>{this.csvData[t][u]?d.push(this.csvData[t][u]):console.error(`could not find part: ${u} from ${t}!`)}),d}loadCsvData(t,a){return new Promise((d,u)=>{this.csvData[t]&&Object.keys(this.csvData[t]).length>0?d(this.csvData[t]):this.PapaParse.parse(a,{header:!0,download:!0,complete:h=>{const p=this.indexByPartNumber(h.data);this.csvData[t]=p,d(this.csvData[t])},error:h=>u(h)})})}indexByPartNumber(t){const a={};return t.forEach(d=>{a[d.part.trim()]=d}),a}}i.ResultHandler=n}),define("modules/questionStrategies/QuestionStrategy",["require","exports","../constants","../Observer"],function(S,i,r,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.QuestionStrategy=void 0;class c{constructor(s,e,n){this.name=s,this.experience=e,this.CerosSDK=n,this.key="value",this.optionsCollection=e.findComponentsByTag(`q:${s}`),this.pathNavigationCollection=e.findLayersByTag(`nav:${s}`),this.selectedOption=new g.NonStrictObservable(`${s}:${this.key}:`)}displayPathNavigation(s){s===r.PATH2?this.experience.findComponentsByTag("show-path2-nav").click():this.experience.findComponentsByTag("show-path1-nav").click()}}i.QuestionStrategy=c}),define("modules/questionStrategies/MaskingOptionsStrategy",["require","exports","./QuestionStrategy"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MaskingOptionsStrategy=void 0;class g extends r.QuestionStrategy{constructor(o,s,e,n){super(o,s,e),this.currentNodeObservable=n,this.key="value",this.maskCollection=this.experience.findLayersByTag(`mask:${this.name}`),this.registerCerosEvents()}registerCerosEvents(){this.optionsCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleOptionClick.bind(this))}handleOptionClick(o){const s=o.getPayload().trim()||"",e=this.selectedOption.value.split(":");e[1]=this.key,e[2]=s,this.selectedOption.value=e.join(":")}displayAnswerOptions(o){this.maskCollection.layers.forEach(s=>{this.handleMasks(s,o)})}handleMasks(o,s){s.findChildByValueProperty(o.getPayload().trim())?o.hide():o.show()}registerMaskAnimations(){this.maskCollection.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,o=>{this.handleMasks(o,this.currentNodeObservable.value)})}}i.MaskingOptionsStrategy=g}),define("modules/questionStrategies/MaskOptionsStrateyWithMultipleCellValues",["require","exports","./MaskingOptionsStrategy"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MaskingOptionsStrategyWithMultipleCellValues=void 0;class g extends r.MaskingOptionsStrategy{handleMasks(o,s){s.findChildThatIncludesValue(o.getPayload().trim())?o.hide():o.show()}}i.MaskingOptionsStrategyWithMultipleCellValues=g}),define("modules/questionStrategies/MaskingOptionsWithSubCategoriesStrategy",["require","exports","./MaskingOptionsStrategy"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MaskingOptionsWithSubcategoriesStrategy=void 0;class g extends r.MaskingOptionsStrategy{displayAnswerOptions(o){console.log(o.name),this.experience.findLayersByTag(`cat:${o.children[0].name}`).layers.forEach(e=>{e.getPayload().trim()===o.value?e.show():e.hide()}),this.maskCollection.layers.forEach(e=>{this.handleMasks(e,o)})}}i.MaskingOptionsWithSubcategoriesStrategy=g}),define("modules/questionStrategies/HidingOptionsStrategy",["require","exports","./QuestionStrategy"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HidingOptionsStrategy=void 0;class g extends r.QuestionStrategy{constructor(o,s,e){super(o,s,e),this.key="elementId",this.isMobile=this.experience.findComponentsByTag("mobile").components.length>0,this.isTablet=this.experience.findComponentsByTag("tablet").components.length>0,this.evenOptions=this.experience.findLayersByTag(`${o.toLowerCase()}_even`),this.oddOptions=this.experience.findLayersByTag(`${o.toLowerCase()}_odd`),this.registerCerosEvents()}registerCerosEvents(){this.optionsCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleOptionClick.bind(this))}handleOptionClick(o){const s=o.id,e=this.selectedOption.value.split(":");e[1]=this.key,e[2]=s,this.selectedOption.value=e.join(":")}displayAnswerOptions(o){const s=o.children.sort((e,n)=>Number(e.value)-Number(n.value));this.isMobile||this.isTablet?console.log("MOBILE LAYOUT!"):this.displayDesktopLayoutOptions(s)}displayDesktopLayoutOptions(o){o.length%2===0?(this.oddOptions.hide(),this.evenOptions.show(),this.handleTextOptions(this.evenOptions,o)):(this.oddOptions.show(),this.evenOptions.hide(),this.handleTextOptions(this.oddOptions,o))}handleTextOptions(o,s){const e=o.layers[0].findAllComponents(),n=e.layersByTag.answer.length,l=Math.floor((n-s.length)/2);let t=0;e.components.forEach(a=>{if(a.type==="text"){const d=t-l;t>=l&&d<s.length?(a.setText(s[d].value),s[d].elementId=a.id):a.hide(),t++}else a.type==="line"&&this.handleLineDivider(a,l,s)})}handleLineDivider(o,s,e){const n=isNaN(Number(o.getPayload()))?null:Number(o.getPayload());n?n>s&&n-s<e.length||o.hide():console.error(`there is no position number in payload of divider line with id ${o.id} in question ${e[0].name}`)}}i.HidingOptionsStrategy=g}),define("modules/questionStrategies/SliderOptionsStrategy",["require","exports","../Observer","./QuestionStrategy"],function(S,i,r,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SliderOptionsStrategy=void 0;class c extends g.QuestionStrategy{constructor(s,e,n){super(s,e,n),this.currentIndex=new r.Observable(0),this.sliderValues=[],this.nextButtonMask=e.findLayersByTag(`${s}-mask`),this.nextButton=e.findLayersByTag(`${s}-next`),this.singleOptionCollection=e.findLayersByTag("single-option"),this.sliderContainer=document.getElementById("slider-container"),this.output=document.getElementById("slider-value"),this.slider=null,this.registerCerosEvents(),this.subscribeToObservables()}subscribeToObservables(){this.currentIndex.subscribe(this.handleNextButtonDisplay.bind(this)),this.currentIndex.subscribe(this.updateSliderBackground.bind(this)),this.currentIndex.subscribe(this.updateSliderValuePosition.bind(this))}registerCerosEvents(){this.optionsCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleOptionClick.bind(this))}handleNextButtonDisplay(s){s>0?(this.nextButtonMask.hide(),this.nextButton.show()):(this.nextButton.hide(),this.nextButtonMask.show())}handleOptionClick(s){const e=this.sliderValues.length===2?this.sliderValues[1].toString():this.sliderValues[this.currentIndex.value].toString(),n=this.selectedOption.value.split(":");n[1]=this.key,n[2]=e,this.selectedOption.value=n.join(":")}getSliderContainer(){return this.sliderContainer}getOutput(){return this.output}displayAnswerOptions(s){const e=s.children.map(n=>Number(n.value));if(this.slider&&(this.slider.remove(),this.slider=null),this.sliderContainer&&this.output)this.displayOutput(e,this.sliderContainer,this.output);else{const n=setInterval(()=>{const l=document.getElementById("slider-container"),t=document.getElementById("slider-value");l&&t&&(clearInterval(n),this.sliderContainer=l,this.output=t,this.displayOutput(e,this.sliderContainer,this.output))},200)}}displayOutput(s,e,n){this.sliderValues=[0,...s],console.log(this.sliderValues),s.length>1?(this.singleOptionCollection.hide(),this.displaySlider(e,n),this.slider&&(this.currentIndex.value=0,this.slider.style.display="block",this.output&&(this.output.style.display="block"),this.handleNextButtonDisplay(this.currentIndex.value))):(this.slider&&(this.slider.style.display="none"),this.output&&(this.output.style.display="none"),this.nextButton.hide(),this.nextButtonMask.hide(),this.displaySingleOption(s))}displaySingleOption(s){this.singleOptionCollection.layers.forEach(e=>e.setText(`${s[0]}`)),this.singleOptionCollection.show()}displaySlider(s,e){this.registerNewSlider(s,e)}registerNewSlider(s,e){const n=this.getSlider(s);this.slider=n,this.slider.addEventListener("input",l=>{const t=l.target;t&&!isNaN(Number(t.value))&&(this.currentIndex.value=parseInt(t.value,10))}),this.updateSliderValuePosition()}updateSliderValuePosition(){if(console.log(`index: ${this.currentIndex.value}`),console.log(`value: ${this.sliderValues[this.currentIndex.value]}`),this.slider&&this.output){const s=this.currentIndex.value/(this.sliderValues.length-1),e=this.slider.offsetWidth,n=32,l=this.slider.offsetLeft,t=s*(e-n)+n/2;this.output.style.left=`${l+t}px`,this.output.textContent=this.currentIndex.value===0?"A":`${this.sliderValues[this.currentIndex.value]}A`}}updateSliderBackground(){if(this.slider){const s=this.currentIndex.value/(this.sliderValues.length-1)*100,e=`linear-gradient(to right, #5CC883 0%, #008752 ${s}%, #ccc ${s}%, #ccc 100%)`;this.slider.style.background=e}}getSlider(s){const e=s.querySelector("#customSlider");if(e)return e;{const n=this.createSlider(this.sliderValues.length-1);return s.prepend(n),n}}createSlider(s){const e=document.createElement("input");return e.type="range",e.id="customSlider",e.min="0",e.max=s.toString(),e.value="0",e}}i.SliderOptionsStrategy=c}),define("modules/moduleStrategies/PartModuleHandler",["require","exports","./ModuleHandler","../constants","../utils"],function(S,i,r,g,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PartModuleHandler=void 0;class o extends r.ModuleHandler{constructor(e,n,l,t,a){super(e,n,l),this.qName=t,this.selectedOption=a}processLayers(e,n){console.log("proccessing part layers"),e[g.IMAGE]&&this.showImageFromUrl(n,this.displayPartImage.bind(this),e[g.IMAGE]),e[this.qName]&&this.updateResultTextbox(this.qName,n,e[this.qName]),e[g.FUSE_STYLE_INFO]&&this.updateResultTextbox(g.FUSE_STYLE_INFO,n,e[g.FUSE_STYLE_INFO]),e[`q:${this.qName}`]&&this.registerOptionClick(this.qName,n,e[`q:${this.qName}`])}registerOptionClick(e,n,l){l.forEach(t=>{t.on(this.CerosSDK.EVENTS.CLICKED,()=>{const d=this.getResultData(n).data[e],u=this.selectedOption.value.split(":");u[2]=d,this.selectedOption.value=u.join(":")})})}displayPartImage(e,n){const l=n[`${this.qName.split("-")[0]} image`];(0,c.setImageUrl)(l,e)}}i.PartModuleHandler=o}),define("modules/questionStrategies/SegmentedOptionsStrategy",["require","exports","../constants","../moduleStrategies/PartModuleHandler","./QuestionStrategy","../moduleStrategies/TabNavHandler"],function(S,i,r,g,c,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SegmentedOptionsStrategy=void 0;class s extends c.QuestionStrategy{constructor(n,l,t){super(n,l,t),this.partModuleHandler=new g.PartModuleHandler(r.PARTS,l,t,n,this.selectedOption),this.tabNavHandler=new o.TabNavHandler(l,t,this.showResultModules.bind(this),r.SEGMENTS,r.FUSE_TYPE_INFO,`fuse type-${r.PATH2}`)}displayAnswerOptions(n){this.tabNavHandler.init(n),this.tabNavHandler.display()}showResultModules(n,l){this.updateResultModules(n,l),this.triggerHotspot(r.PARTS,n,3)}updateResultModules(n,l){l.forEach((t,a)=>{this.partModuleHandler.updateModule(n,a,t.data)})}triggerHotspot(n,l,t){this.experience.findComponentsByTag(`${n}-${l<=t?l:`${t+1}+`}`).click()}}i.SegmentedOptionsStrategy=s}),define("modules/questionStrategies/QuestionStrategyFactory",["require","exports","./MaskingOptionsStrategy","./MaskOptionsStrateyWithMultipleCellValues","./MaskingOptionsWithSubCategoriesStrategy","./HidingOptionsStrategy","./SliderOptionsStrategy","./SegmentedOptionsStrategy"],function(S,i,r,g,c,o,s,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.QuestionStrategyFactory=void 0;class n{static create(t,a,d,u,h){switch(a.questionStrategy){case"hiding":return new o.HidingOptionsStrategy(t,d,h);case"masking-with-subcategories":return new c.MaskingOptionsWithSubcategoriesStrategy(t,d,h,u);case"masking-with-mulitiple-cell-values":return new g.MaskingOptionsStrategyWithMultipleCellValues(t,d,h,u);case"slider":return new s.SliderOptionsStrategy(t,d,h);case"segments":return new e.SegmentedOptionsStrategy(t,d,h);case"masking":default:return new r.MaskingOptionsStrategy(t,d,h,u)}}}i.QuestionStrategyFactory=n});var __awaiter=this&&this.__awaiter||function(S,i,r,g){function c(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function e(t){try{l(g.next(t))}catch(a){s(a)}}function n(t){try{l(g.throw(t))}catch(a){s(a)}}function l(t){t.done?o(t.value):c(t.value).then(e,n)}l((g=g.apply(S,i||[])).next())})};define("modules/QuizContext",["require","exports","./constants","./lib/NodeTree","./Observer","./utils","./ResultHandler","./DoubleClickBugHandler","./moduleStrategies/ProductModuleHandler","./questionStrategies/QuestionStrategyFactory","./moduleStrategies/ModuleHandler"],function(S,i,r,g,c,o,s,e,n,l,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.QuizContext=void 0;class a{constructor(u,h,p,f,m,y,C,T){this.CerosSDK=u,this.experience=h,this.distributor=f,this.relatedProductsLink=m,this.accessoriesLink=y,this.PapaParse=C,this.path2Link=T,this.questions={},this.imgLargeOverlayCollection=this.experience.findLayersByTag(r.IMG_LRG),this.imgLrgLink=new c.Observable(""),this.imgLrgCloseHotspotCollection=this.experience.findLayersByTag(`${r.IMG_LRG}-close`),this.path2NodeTree=null,this.currentTree=p,this.path1NodeTree=p,this.currentNode=new c.Observable(p.root),this.backLayersCollection=this.experience.findLayersByTag(r.BACK),this.navCollecttion=this.experience.findComponentsByTag(r.NAV),this.pathTextCollection=this.experience.findComponentsByTag(r.PATH),this.resetCollection=this.experience.findLayersByTag(r.RESET),this.mcaseAdapterCtaCollection=this.experience.findLayersByTag(`${r.MCASE_ADAPTER}-cta`),this.resultHandler=new s.ResultHandler(h,u,this.currentNode,f,m,y,C,this.imgLrgLink),this.mcaseAdapterModuleHandler=new n.ProductModuleHandler(r.MCASE_ADAPTER,h,u,f,this.resultHandler.landingPageProxy,this.imgLrgLink),this.doubleClickHandler=new e.DoubleClickBugHandler,this.init()}init(){this.subscribeCurrentNodeObserver(),this.subscribeToCerosEvents(),this.assignQuestionsStrategy(),this.registerImageOverlay()}registerImageOverlay(){this.imgLargeOverlayCollection.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,u=>{t.ModuleHandler.handleModuleImage(u,{image:this.imgLrgLink.value})}),this.imgLrgCloseHotspotCollection.on(this.CerosSDK.EVENTS.CLICKED,()=>{this.imgLrgLink.value=""}),this.imgLrgLink.subscribe(u=>{this.imgLargeOverlayCollection.layers.forEach(h=>{t.ModuleHandler.handleModuleImage(h,{image:u})})})}subscribeCurrentNodeObserver(){this.currentNode.subscribe(this.handleNodeChange.bind(this)),this.currentNode.subscribe(this.updatePath.bind(this))}assignQuestionsStrategy(){for(const u in r.fieldNodesDict){const h=r.fieldNodesDict[u];if(h.type==="question"){const p=l.QuestionStrategyFactory.create(u,h,this.experience,this.currentNode,this.CerosSDK);this.questions[u]=p,p.selectedOption.subscribe(this.handleSelectedAnswer.bind(this))}}}subscribeToCerosEvents(){this.backLayersCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleBackNavigation.bind(this)),this.navCollecttion.on(this.CerosSDK.EVENTS.CLICKED,this.handleRandomNavigation.bind(this)),this.resetCollection.on(this.CerosSDK.EVENTS.CLICKED,this.resetQuiz.bind(this)),this.mcaseAdapterCtaCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleMcaseAdapter.bind(this))}handleMcaseAdapter(u){return __awaiter(this,void 0,void 0,function*(){if(this.doubleClickHandler.isDoubleClickBug(u.id))return;const h=u.getPayload().trim();yield this.resultHandler.loadCsvData(r.RELATED_PRODUCTS,this.relatedProductsLink);const p=this.resultHandler.csvData[r.RELATED_PRODUCTS][h];p?(this.mcaseAdapterModuleHandler.updateModule(1,0,p),this.experience.findComponentsByTag(`${r.MCASE_ADAPTER}-1`).click()):console.error(`Could not find part ${h} in related products sheet`)})}resetQuiz(){this.currentNode.value=this.currentTree.root}handleSelectedAnswer(u){return __awaiter(this,void 0,void 0,function*(){const[h,p,f]=u.split(":");h==="fuse type"&&(f.toLowerCase()==="guide me"?this.currentTree=yield this.loadCsvDataIntoNodeTree():this.currentTree=this.path1NodeTree,this.currentNode.value=this.currentTree.root);const m=this.currentTree.findChild(this.currentNode.value,p,f);m?this.updateCurrentNodeValue(m,h,f):console.error(`coudn't find node with ${h} and value ${f}`)})}updateCurrentNodeValue(u,h,p){r.fieldNodesDict[h].skipif&&r.fieldNodesDict[h].skipif.find(f=>f===p)&&u.children.length?this.currentNode.value=u.children[0]:this.currentNode.value=u}loadCsvDataIntoNodeTree(){if(this.path2NodeTree)return Promise.resolve(this.path2NodeTree);const u=new g.NodeTree(r.fieldNodesDict);return new Promise((h,p)=>{this.PapaParse.parse(this.path2Link,{header:!0,download:!0,complete:f=>{u.buildTree(f.data,r.path2Fields),u.mergeDataWithFields(this.path1NodeTree,u.root,r.transitionFields),this.path2NodeTree=u,h(u)},error:f=>p(f)})})}handleBackNavigation(u){if(this.doubleClickHandler.isDoubleClickBug(u.id))return;const h=this.currentNode.value,p=h.parent;if(!p)return;const f=h.name;console.log(`clicked back to ${h.name}`);const m=r.fieldNodesDict[f];if(m&&m.skipBackIf){const y=m.skipBackIf,C=Object.keys(y)[0],T=y[C],b=h.findParentByName(C);if(b&&T.find(E=>E===b.value)){this.currentNode.value=p.parent||p;return}}this.currentNode.value=p}handleRandomNavigation(u){if(this.doubleClickHandler.isDoubleClickBug(u.id))return;const h=u.getPayload().toLowerCase(),p=this.currentNode.value.findParentByName(h);p&&p.parent?this.currentNode.value=p.parent:console.error(`Could not find node ${h} or it's parent`)}handleNodeChange(u){if(u.children.length){if(this.isLastQuestion(u)){const h=this.currentTree===this.path1NodeTree?r.PATH1:r.PATH2;this.resultHandler.showResultModule(u.children.length,h),this.handlePathNavigation(this.resultHandler)}else{const h=u.children[0].name.toLowerCase(),p=this.questions[h];p&&(p.displayAnswerOptions(u),this.handlePathNavigation(p))}console.log(this.currentNode.value)}}handlePathNavigation(u){this.currentTree===this.path2NodeTree?u.displayPathNavigation(r.PATH2):u.displayPathNavigation(r.PATH1)}updatePath(u){let h=u;const p=[];h.getPath().forEach(({name:m,value:y})=>{if(m==="Root")return;const T=(m==="fuse type"&&this.currentTree===this.path2NodeTree?"{{}}":r.fieldNodesDict[m].pathText).replace("{{}}",(0,o.capitalize)(y));p.push(T)}),p.length?this.pathTextCollection.setText(p.join("  >  ")):this.pathTextCollection.setText(""),this.pathTextCollection.show()}isLastQuestion(u){return u.children[0].name==="part"}}i.QuizContext=a});const script=document.getElementById("fuse-holders");if(script===null)throw Error("Could not find script fuse-holders");const link=script.getAttribute("data-link")||"",distributor=script.getAttribute("data-distributor")||"",relatedProductsLink=script.getAttribute("data-related-products")||"",accessoriesLink=script.getAttribute("data-accessories")||"",path2Link=script.getAttribute("data-path2")||"";typeof require<"u"&&typeof require=="function"&&(require.config({baseUrl:"http://127.0.0.1:5173/",paths:{CerosSDK:"//sdk.ceros.com/standalone-player-sdk-v5.min",PapaParse:"https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min"}}),require(["CerosSDK","PapaParse","modules/QuizContext","modules/lib/NodeTree","modules/constants","modules/utils"],function(S,i,r,g,c,o){S.findExperience().done(s=>{const e=o.stepsFromFieldNames(c.path1Fields,c.fieldNodesDict),n=new g.NodeTree(e);i.parse(link,{download:!0,header:!0,complete:l=>{n.buildTree(l.data,c.path1Fields),new r.QuizContext(S,s,n,distributor,relatedProductsLink,accessoriesLink,i,path2Link)}})}).fail(s=>{console.log(s)})})),define("main",function(){});
