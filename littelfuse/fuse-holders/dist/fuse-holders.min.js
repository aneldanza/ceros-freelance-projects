"use strict";define("modules/constants",["require","exports"],function(S,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_IMAGE=t.TAB=t.FUSE_TYPE_INFO=t.FUSE_STYLE_INFO=t.PATH1=t.PATH2=t.IMG_LRG=t.MCASE_ADAPTER=t.MAX_TABS=t.MOBILE_MAX_ITEMS=t.MAX_RESULTS=t.MAX_ACCESSORIES=t.MAX_RELATED_PRODUCTS=t.DIVIDER=t.SEGMENTS=t.PARTS=t.RESULTS=t.ACCESSORIES=t.RELATED_PRODUCTS=t.NAV=t.BACK=t.PATH=t.PRODUCT_GUIDE=t.BUY_NOW=t.PRINT=t.DATASHEET=t.DESCRIPTION=t.IMAGE=t.PART=t.SERIES=t.SPECS=t.DELIMETER=t.RESET=t.QUESTION=t.OPTION=t.fieldNodesDict=t.path1Fields=t.path2Fields=t.transitionFields=void 0,t.transitionFields={"fuse type":"fuse type-path2","fuse style":"fuse style-path2","max voltage":"max voltage-path2","max current":"max current-path2"},t.path2Fields=["fuse type","application voltage","application load","application amps","fuse style-path2"],t.path1Fields=["fuse type","fuse style","max voltage","max current","circuit option","style","mounting method","protection","part"],t.fieldNodesDict={"application voltage":{type:"question",pathText:"Voltage: {{}}"},"application load":{type:"question",pathText:"Load: {{}}",questionStrategy:"masking",multiValue:!0},"application amps":{type:"question",pathText:"Amps: {{}}",questionStrategy:"slider"},"fuse style-path2":{type:"question",pathText:"Style: {{}}",questionStrategy:"segments"},"max voltage-path2":{type:"question",pathText:"Volts: <={{}}V DC",breakKeys:!0},"max current-path2":{type:"question",pathText:"Amps: {{}}A",breakKeys:!0},"fuse type":{type:"question",pathText:"Fuse Type: {{}}"},"fuse type-path2":{type:"question",pathText:"{{}}"},"fuse style":{type:"question",pathText:"Fuse Style: {{}}",questionStrategy:"masking-with-subcategories"},"max voltage":{type:"question",pathText:"Volts: {{}}V DC",questionStrategy:"hiding"},"max current":{type:"question",pathText:"Amps: {{}}A",questionStrategy:"hiding"},"circuit option":{type:"question",pathText:"Circuit: {{}}",questionStrategy:"masking"},style:{type:"question",pathText:"Style: {{}}",questionStrategy:"masking",skipif:["PCBA","Fuse Block"]},"mounting method":{type:"question",pathText:"Mounting: {{}}",questionStrategy:"masking-with-subcategories",skipBackIf:{style:["PCBA","Fuse Block"]}},protection:{type:"question",pathText:"Protection: {{}}",questionStrategy:"masking"},part:{type:"result",pathText:""}},t.OPTION="answer",t.QUESTION="q",t.RESET="reset",t.DELIMETER=":",t.SPECS="specs",t.SERIES="series",t.PART="part",t.IMAGE="img",t.DESCRIPTION="description",t.DATASHEET="datasheet",t.PRINT="2d print",t.BUY_NOW="buy-now",t.PRODUCT_GUIDE="product guide",t.PATH="path",t.BACK="back",t.NAV="nav",t.RELATED_PRODUCTS="related products",t.ACCESSORIES="accessories",t.RESULTS="module",t.PARTS="part module",t.SEGMENTS="segment",t.DIVIDER=";",t.MAX_RELATED_PRODUCTS=2,t.MAX_ACCESSORIES=4,t.MAX_RESULTS=5,t.MOBILE_MAX_ITEMS=1,t.MAX_TABS=4,t.MCASE_ADAPTER="mcase-adapter",t.IMG_LRG="img lrg",t.PATH2="path2",t.PATH1="path1",t.FUSE_STYLE_INFO="fuse style info",t.FUSE_TYPE_INFO="fuse type info",t.TAB="tab",t.DEFAULT_IMAGE="https://ceros-projects.s3.us-east-2.amazonaws.com/littlefuse/fuse-holders/Image+Not+Available.jpg"}),define("modules/lib/Node",["require","exports"],function(S,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;class r{constructor(g,d="",i=null){this.name=g,this.value=d,this.parent=i,this.children=[],this.elementId="",this.data={}}findChildByValueProperty(g){return this.children.find(d=>d.value.toLowerCase()===g.toLowerCase())||null}findChildThatIncludesValue(g){return this.children.find(d=>d.value.toLowerCase()===g.toLowerCase())||null}findAllChildrenThatIncludeValue(g){return this.children.filter(d=>d.value.toLowerCase()===g.toLowerCase())||null}findParentByName(g){let d=this;for(;d;){if(d.name===g)return d;d=d.parent}}getPath(){const g=[];let d=this;for(;d;)g.unshift({name:d.name,value:d.value}),d=d.parent;return g}}t.Node=r}),define("modules/lib/treeHelpers",["require","exports","../constants"],function(S,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MERGE_FIELDS_P1=void 0,t.makeKey=g,t.makeKeys=i,t.getChildrenByPath=e,t.getP1MergeValsFromP2Node=a,t.MERGE_FIELDS_P1=["fuse type","fuse style","max voltage","max current"];function p(u){return(u??"").trim().toLowerCase().replace(/\s+/g," ")}function g(u,s){return s.map(l=>p(u[l])||"\u2205").join("|")}function d(u,s,l=","){const o=Object.entries(u);let h=[{}];for(const[c,f]of o){const m=s[r.transitionFields[c]],y=f??"";h=(m?.breakKeys&&y.includes(l)?y.split(l).map(T=>T.trim()).filter(Boolean):[y]).flatMap(T=>h.map(b=>Object.assign(Object.assign({},b),{[c]:T})))}return h}function i(u,s,l){const o=[];return Object.keys(u).filter(f=>l[r.transitionFields[f]].breakKeys).length?d(u,l,",").forEach(m=>o.push(g(m,s))):o.push(g(u,s)),o}function e(u,s){const l=u.split("|");return n(0,s,l,[])}function n(u,s,l,o){return u===t.MERGE_FIELDS_P1.length?s.children:(s.findAllChildrenThatIncludeValue(l[u]).forEach(c=>{o=o.concat(n(u+1,c,l,o))}),o)}function a(u,s){const l={};for(const o of t.MERGE_FIELDS_P1){const h=s[o]||o,c=u.data[h];if(!c)return null;l[o]=c}return l}}),define("modules/lib/NodeTree",["require","exports","./Node","./treeHelpers","./treeHelpers"],function(S,t,r,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeTree=void 0;class d{constructor(e){this.fields=e,this.root=new r.Node("Root")}buildTree(e,n){e.forEach(a=>{this.addBranch(this.root,a,n)}),console.log(this.root)}addNewNode(e,n,a,u={}){const s=a.findChildByValueProperty(e);if(s)return s;{const l=new r.Node(n,e,a);return l.data=u,a.children.push(l),l}}addBranch(e,n,a){var u,s;let l=e;for(let o=0;o<a.length;o++){const h=a[o].trim(),c=(s=(u=n[h])===null||u===void 0?void 0:u.trim)===null||s===void 0?void 0:s.call(u);if(c){if(this.fields[h].multiValue){const f=a.slice(o+1);n[h].split(",").map(y=>y.trim()).forEach(y=>{let C;this.fields[h].type==="result"||this.fields[h].questionStrategy==="segments"||o===a.length-1?C=this.addNewNode(y,h,l,n):C=this.addNewNode(y,h,l),this.addBranch(C,n,f)});return}this.fields[h].type==="result"||this.fields[h].questionStrategy==="segments"||o===a.length-1?l=this.addNewNode(c,h,l,n):l=this.addNewNode(c,h,l)}}}mergeNodes(e,n,a){const u=(0,g.getP1MergeValsFromP2Node)(e,n);if(u){const s=(0,p.makeKeys)(u,p.MERGE_FIELDS_P1,this.fields);let l=[];s.forEach(o=>{const h=(0,p.getChildrenByPath)(o,a.root);l=[...l,...h]}),this.attachNewChildren(l,e)}}attachNewChildren(e,n){!e||e.length===0||e.forEach(a=>{const u=this.addNewNode(a.value,a.name,n,a.data),s=a.children;this.attachNewChildren(s,u)})}mergeDataWithFields(e,n,a){const u=s=>{if(s.children.length===0){this.mergeNodes(s,a,e);return}for(const l of s.children)u(l)};for(const s of n.children)u(s)}findChild(e,n,a){return e.children.find(u=>u[n].toLowerCase()===a.toLowerCase().trim())}}t.NodeTree=d}),define("modules/Observer",["require","exports"],function(S,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonStrictObservable=t.Observable=t.Observer=void 0;class r{constructor(){this.subscribers=new Set}subscribe(i){this.subscribers.add(i)}notify(i){this.subscribers.forEach(e=>e(i))}}t.Observer=r;class p extends r{constructor(i){super(),this._value=i}get value(){return this._value}set value(i){this._value!==i&&(this._value=i,this.notify(this._value))}}t.Observable=p;class g extends r{constructor(i){super(),this._value=i}get value(){return this._value}set value(i){this._value=i,this.notify(this._value)}}t.NonStrictObservable=g}),define("modules/utils",["require","exports","./constants"],function(S,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=t.setImageUrl=t.getModuleTag=t.stepsFromFieldNames=t.capitalize=t.getValueFromTags=void 0;const p=(a,u,s=r.DELIMETER)=>{const l=a.find(o=>o.trim().startsWith(`${u}${s}`));return l?l.split(r.DELIMETER)[1].trim():""};t.getValueFromTags=p;const g=a=>a?a.split(" ").map(s=>s[0].toUpperCase()+s.slice(1)).join(" "):"";t.capitalize=g;const d=(a,u)=>{const s=a.map(l=>[l,u[l]]);return Object.fromEntries(s)};t.stepsFromFieldNames=d;const i=(a,u,s)=>a>1?`${a}-${s}-${u+1}`:`${a}-${s}`;t.getModuleTag=i;const e=(a,u)=>{try{new URL(a),u.setUrl(a)}catch(s){console.error(s),u.setUrl(r.DEFAULT_IMAGE)}};t.setImageUrl=e;const n=a=>a.findComponentsByTag("mobile").components.length>0;t.isMobile=n}),define("modules/DoubleClickBugHandler",["require","exports"],function(S,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DoubleClickBugHandler=void 0;class r{constructor(){this.clickObjectTimeTracker={}}isDoubleClickBug(g){const d=Date.now(),i=this.clickObjectTimeTracker[g];if(this.clickObjectTimeTracker[g]=d,i){const e=d-i;return console.log(e),e<900}}}t.DoubleClickBugHandler=r}),define("modules/LandinPageProxy",["require","exports","./DoubleClickBugHandler"],function(S,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LandingPageProxy=void 0;class p{constructor(){this.windowObjectReference=null,this.doubleClickBugHandler=new r.DoubleClickBugHandler,this.isPreview=window.self==window.top&&window.location.hostname.includes(".preview.ceros")}sendUAEvent(d){if(window.self!==window.top){const i={event_category:"CEROS",event_label:d,event_action:"outbound_link_click"};parent.postMessage(JSON.stringify(i),"*")}else window.dataLayer.push({event:"ceros-event",cerosAction:"ceros_outbound_link_click",cerosCategory:"CEROS",cerosLabel:d}),this.openRequestedSingleTab(d)}openRequestedSingleTab(d){this.windowObjectReference===null||this.windowObjectReference.closed?this.windowObjectReference=window.open(d,"_blank"):(this.windowObjectReference=window.open(d,"_blank"),this.windowObjectReference.focus())}openAndTrackLink(d,i){this.doubleClickBugHandler.isDoubleClickBug(i)||(this.isPreview?this.openRequestedSingleTab(d):this.sendUAEvent(d))}}t.LandingPageProxy=p}),define("modules/moduleStrategies/ModuleHandler",["require","exports","../utils","../DoubleClickBugHandler"],function(S,t,r,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleHandler=void 0;class g{constructor(i,e,n){this.moduleName=i,this.experience=e,this.CerosSDK=n,this.moduleDict={},this.isNew=!1,this.doubleClickBugHandler=new p.DoubleClickBugHandler}static handleModuleImage(i,e){const n=e.image;(0,r.setImageUrl)(n,i)}updateModule(i,e,n,a,u){const s=(0,r.getModuleTag)(i,e,this.moduleName),l=this.experience.findLayersByTag(s);if(!l.layers.length){console.error(`No module found with tag: ${s}`);return}const h=l.layers[0].findAllComponents().layersByTag,c=i.toString();this.moduleDict[c]=this.moduleDict[c]||{},this.isNew=!this.moduleDict[c][s],this.moduleDict[c][s]||(this.moduleDict[c][s]={data:{},layers:{}}),this.moduleDict[c][s].data=n,this.moduleDict[c][s].layers=h,this.processLayers(h,s,u),a&&a(h,s),console.log(this.moduleDict),l.show()}showImageFromUrl(i,e,n,a){n.forEach(u=>{const s=this.getResultData(i);e(u,s.data),this.isNew&&u.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,l=>{const o=this.getResultData(i);e(l,o.data)}),a&&this.isNew&&u.on(this.CerosSDK.EVENTS.CLICKED,l=>{a(i)})})}updateResultTextbox(i,e,n,a){n.forEach(u=>{const s=this.getResultData(e),l=a?a(s.data[i]):s.data[i];u.setText(l),this.isNew&&u.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,o=>{const h=this.getResultData(e),c=a?a(h.data[i]):h.data[i];o.setText(c)})})}getResultData(i){const e=i.split("-")[0];return this.moduleDict[e][i]}hideModule(i,e){const n=(0,r.getModuleTag)(i,e,this.moduleName),a=this.experience.findLayersByTag(n);if(!a.layers.length){console.error(`No module found with tag: ${n}`);return}a.hide()}}t.ModuleHandler=g}),define("modules/moduleStrategies/ProductModuleHandler",["require","exports","../constants","./ModuleHandler","../utils"],function(S,t,r,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductModuleHandler=void 0;class d extends p.ModuleHandler{constructor(e,n,a,u,s,l){super(e,n,a),this.distributor=u,this.landingPageProxy=s,this.imgLrgLink=l,this.imgLargeHotspotCollection=this.experience.findComponentsByTag(`${r.IMG_LRG}-1`)}processLayers(e,n,a){e[r.IMAGE]&&this.showImageFromUrl(n,p.ModuleHandler.handleModuleImage,e[r.IMAGE],this.imageClickCallback.bind(this)),e[r.PART]&&this.updateResultTextbox(r.PART,n,e[r.PART]),e[r.SERIES]&&this.updateResultTextbox(r.SERIES,n,e[r.SERIES]),e[r.DATASHEET]&&this.registerResultClcikEvent(e[r.DATASHEET],r.DATASHEET,n),e[r.PRINT]&&this.registerResultClcikEvent(e[r.PRINT],r.PRINT,n),e[r.BUY_NOW]&&this.registerResultClcikEvent(e[r.BUY_NOW],this.distributor,n),e[r.PRODUCT_GUIDE]&&this.registerResultClcikEvent(e[r.PRODUCT_GUIDE],r.PRODUCT_GUIDE,n),e[r.SPECS]&&this.updateResultTextbox(r.SPECS,n,e[r.SPECS]),e[r.DESCRIPTION]&&this.updateResultTextbox(r.DESCRIPTION,n,e[r.DESCRIPTION]),e.pick&&this.handleLittelfusePick(e.pick,!!a)}handleLittelfusePick(e,n){n?e.forEach(a=>a.show()):e.forEach(a=>a.hide())}imageClickCallback(e){if(!(0,g.isMobile)(this.experience)){const n=this.getResultData(e);this.imgLrgLink.value=n.data.image,this.imgLargeHotspotCollection.click()}}registerResultClcikEvent(e,n,a){e.forEach(u=>{u.on(this.CerosSDK.EVENTS.CLICKED,()=>{const s=this.getResultData(a);this.landingPageProxy.openAndTrackLink(s.data[n],u.id)}),u.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,s=>{this.getResultData(a).data[n]||s.hide()})})}}t.ProductModuleHandler=d}),define("modules/Carousel",["require","exports","./Observer","./DoubleClickBugHandler"],function(S,t,r,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Carousel=void 0;class g{constructor(i,e,n,a,u,s){this.max=i,this.name=e,this.CerosSDK=n,this.experience=a,this.moduleHandler=u,this.processOverlayLayers=s,this.currentPage=new r.NonStrictObservable(0),this.parts=[],this.next=this.experience.findLayersByTag(`${this.name}-next`),this.back=this.experience.findLayersByTag(`${this.name}-back`),this.currentIndex=this.experience.findComponentsByTag(`${this.name}-current`),this.totalIndex=this.experience.findComponentsByTag(`${this.name}-total`),this.pages={},this.doubleClickBugHandler=new p.DoubleClickBugHandler,this.registerNavigationEvents()}init(i){this.pages={},this.parts=i,this.paginate(),this.setTotalPageIndex(),this.currentPage.value=1}paginate(){let i=0,e=1;for(;i<this.parts.length;){const n=i+this.max<this.parts.length?i+this.max:this.parts.length;this.pages[e]=this.parts.slice(i,n),i=i+this.max,e++}console.log(this.pages)}registerNavigationEvents(){this.next.on(this.CerosSDK.EVENTS.CLICKED,i=>{this.doubleClickBugHandler.isDoubleClickBug(i.id)||(this.currentPage.value++,console.log(this.currentPage.value))}),this.back.on(this.CerosSDK.EVENTS.CLICKED,i=>{this.doubleClickBugHandler.isDoubleClickBug(i.id)||this.currentPage.value--}),this.next.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,()=>{this.isLastPage()&&this.next.hide()}),this.back.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,()=>{this.isFirstPage()&&this.back.hide()}),this.currentPage.subscribe(()=>{this.hideModules(),this.updatePageIndex(),this.populate(),this.isLastPage()?this.next.hide():this.next.show(),this.isFirstPage()?this.back.hide():this.back.show()})}populate(){let i=0;const e=this.pages[this.currentPage.value];for(;i<this.max&&i<e.length;){const n=e[i];if(n){const a=this.currentPage.value===1;this.moduleHandler.updateModule(this.max,i,n,this.processOverlayLayers,a)}i++}}hideModules(){let i=0;for(;i<this.max;)this.moduleHandler.hideModule(this.max,i),i++}updatePageIndex(){this.currentIndex.components.forEach(i=>i.setText(this.currentPage.value.toString()))}setTotalPageIndex(){const i=Object.keys(this.pages);this.totalIndex.components.forEach(e=>e.setText(i[i.length-1]))}isLastPage(){const i=Object.keys(this.pages);return this.currentPage.value===Number(i[i.length-1])}isFirstPage(){return this.currentPage.value===1}}t.Carousel=g}),define("modules/moduleStrategies/NavModuleHandler",["require","exports","./ModuleHandler"],function(S,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavModuleHandler=void 0;class p extends r.ModuleHandler{constructor(d,i,e,n,a){super(d,i,e),this.currentSegment=n,this.textFormat=a}processLayers(d,i){d.name&&this.updateResultTextbox("name",i,d.name,this.textFormat),d.cta&&this.registerTabChangeCta("name",i,d.cta)}selectTab(d,i){const e=this.moduleDict[i];for(const n in e){const a=e[n];a.data.name===d&&a.layers.cta.forEach(u=>{u.click(),console.log(`clicked ${d}`)})}}registerTabChangeCta(d,i,e){e.forEach(n=>{n.on(this.CerosSDK.EVENTS.CLICKED,a=>{if(this.doubleClickBugHandler.isDoubleClickBug(a.id))return;const u=this.getResultData(i);this.currentSegment.value=u.data[d]})})}}t.NavModuleHandler=p}),define("modules/moduleStrategies/TabNavHandler",["require","exports","./NavModuleHandler","../Observer","../constants"],function(S,t,r,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabNavHandler=void 0;class d{constructor(e,n,a,u,s,l,o){this.experience=e,this.CerosSDK=n,this.showResultModule=a,this.tabTag=u,this.tabTextTag=s,this.tabKey=l,this.textFormat=o,this.segments={},this.currentSegment=new p.NonStrictObservable(""),this.navModuleHandler=new r.NavModuleHandler(u,e,n,this.currentSegment,this.textFormat),this.tabTextComponentCollection=e.findComponentsByTag(s),this.subscribeToSegmentChange()}init(e){this.segments={},this.mapSegments(e.children)}subscribeToSegmentChange(){this.currentSegment.subscribe(this.displayModules.bind(this)),this.currentSegment.subscribe(this.updateFuseTypeInfo.bind(this))}display(){this.updateNavigation(),this.triggerHotspot(this.tabTag,Object.keys(this.segments).length,3);const e=Object.keys(this.segments)[0];this.navModuleHandler.selectTab(e,Object.keys(this.segments).length.toString())}mapSegments(e){e.forEach(n=>{const a=n.data[this.tabKey].trim();this.segments[a]=this.segments[a]||{},this.segments[a].nodes=this.segments[a].nodes||[],this.segments[a].nodes.push(n)})}displayModules(){const e=this.segments[this.currentSegment.value]?this.segments[this.currentSegment.value].nodes.length:0;e?this.showResultModule(e,this.segments[this.currentSegment.value].nodes):console.log("No options in segement "+this.currentSegment.value)}updateFuseTypeInfo(){const e=this.segments[this.currentSegment.value].nodes[0].data[this.tabTextTag];this.tabTextComponentCollection.setText(e)}updateNavigation(){const e=Object.keys(this.segments).length;e&&(this.updateNavModules(e),this.triggerHotspot(this.tabTag,e,g.MAX_TABS))}updateNavModules(e){Object.keys(this.segments).forEach((a,u)=>{this.navModuleHandler.updateModule(e,u,{name:a})})}triggerHotspot(e,n,a){this.experience.findComponentsByTag(`${e}-${n<=a?n:`${a+1}+`}`).click()}isOneTab(e){const n=e[0].data[this.tabKey];return e.every(a=>a.data[this.tabKey]===n)}}t.TabNavHandler=d});var __awaiter=this&&this.__awaiter||function(S,t,r,p){function g(d){return d instanceof r?d:new r(function(i){i(d)})}return new(r||(r=Promise))(function(d,i){function e(u){try{a(p.next(u))}catch(s){i(s)}}function n(u){try{a(p.throw(u))}catch(s){i(s)}}function a(u){u.done?d(u.value):g(u.value).then(e,n)}a((p=p.apply(S,t||[])).next())})};define("modules/ResultHandler",["require","exports","./constants","./LandinPageProxy","./moduleStrategies/ProductModuleHandler","./DoubleClickBugHandler","./Carousel","./moduleStrategies/TabNavHandler","./utils"],function(S,t,r,p,g,d,i,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResultHandler=void 0;class a{constructor(s,l,o,h,c,f,m,y){this.experience=s,this.CerosSDK=l,this.currentNodeObservable=o,this.distributor=h,this.relatedProductsLink=c,this.accessoriesLink=f,this.PapaParse=m,this.imgLrgLink=y,this.csvData={"related products":{},accessories:{}},this.maxResultItems=r.MAX_RESULTS,this.maxRelatedProducts=r.MAX_RELATED_PRODUCTS,this.maxAccessories=r.MAX_ACCESSORIES,this.doubleClickBugHandler=new d.DoubleClickBugHandler,(0,n.isMobile)(s)&&(this.maxResultItems=r.MOBILE_MAX_ITEMS,this.maxRelatedProducts=r.MOBILE_MAX_ITEMS,this.maxAccessories=r.MOBILE_MAX_ITEMS),this.pathNavigationCollection=s.findLayersByTag(`nav:${r.PART}`),this.landingPageProxy=new p.LandingPageProxy,this.resultModulesHandler=new g.ProductModuleHandler(r.RESULTS,s,l,h,this.landingPageProxy,this.imgLrgLink),this.relatedProductsModulesHandler=new g.ProductModuleHandler(r.RELATED_PRODUCTS,s,l,h,this.landingPageProxy,this.imgLrgLink),this.accessoriesModulesHandler=new g.ProductModuleHandler(r.ACCESSORIES,s,l,h,this.landingPageProxy,this.imgLrgLink),this.accessoriesCarousel=new i.Carousel(this.maxAccessories,r.ACCESSORIES,l,s,this.accessoriesModulesHandler),this.relatedProductsCarousel=new i.Carousel(this.maxRelatedProducts,r.RELATED_PRODUCTS,l,s,this.relatedProductsModulesHandler),this.resultsCarousel=new i.Carousel(this.maxResultItems,r.RESULTS,l,s,this.resultModulesHandler,this.processOverlayLayers.bind(this)),this.tabNavHandler=new e.TabNavHandler(this.experience,this.CerosSDK,this.showPath2Results.bind(this),r.TAB,"","max current",this.formatTabText)}formatTabText(s){return`${s}A`}displayPathNavigation(s){this.pathNavigationCollection.layers.forEach(l=>{l.getPayload().trim()===s?l.show():l.hide()})}showResultModule(s,l){l===r.PATH2?(this.tabNavHandler.init(this.currentNodeObservable.value),this.tabNavHandler.isOneTab(this.currentNodeObservable.value.children)&&this.showPath1Results(s),this.tabNavHandler.display()):this.showPath1Results(s)}showPath1Results(s){this.updateResultModules(s,this.currentNodeObservable.value.children),this.triggerHotspot(r.RESULTS,s,this.maxResultItems)}showPath2Results(s,l){this.updateResultModules(s,l),this.triggerHotspot(r.RESULTS,s,this.maxResultItems)}sortNodesBySales(s){return s.sort((l,o)=>{const h=isNaN(Number(l.data.sales))?0:Number(l.data.sales);return(isNaN(Number(o.data.sales))?0:Number(o.data.sales))-h})}updateResultModules(s,l){const o=this.sortNodesBySales(l);o.length<=this.maxResultItems?o.forEach((h,c)=>{this.resultModulesHandler.updateModule(s,c,h.data,this.processOverlayLayers.bind(this))}):this.resultsCarousel.init(o.map(h=>h.data))}processOverlayLayers(s,l){s[r.RELATED_PRODUCTS]&&this.handleOverlay(r.RELATED_PRODUCTS,s[r.RELATED_PRODUCTS],l,this.relatedProductsLink),s[r.ACCESSORIES]&&this.handleOverlay(r.ACCESSORIES,s[r.ACCESSORIES],l,this.accessoriesLink)}updateRelatedProductsModules(s){s.length<=this.maxRelatedProducts?s.forEach((l,o)=>{this.relatedProductsModulesHandler.updateModule(s.length,o,l)}):this.relatedProductsCarousel.init(s)}updateAccessoriesModules(s){s.length<=this.maxAccessories?s.forEach((l,o)=>{this.accessoriesModulesHandler.updateModule(s.length,o,l)}):this.accessoriesCarousel.init(s)}handleOverlay(s,l,o,h){l.forEach(c=>{this.resultModulesHandler.isNew?(this.registerOverlayAnimation(c,o,s),this.registerOverlayClick(c,o,s,h)):this.handleButtonDisplay(c,o,s)})}handleButtonDisplay(s,l,o){if(this.getPartNumbers(l,o).length===0)s.hide();else if(o===r.ACCESSORIES){const c=!!this.getPartNumbers(l,r.RELATED_PRODUCTS).length,f=!!this.getValue(l,r.PRODUCT_GUIDE);c||f?s.getTags().find(m=>m==="pos:1")?s.hide():s.show():s.getTags().find(m=>m==="pos:2")?s.hide():s.show()}else s.show()}registerOverlayAnimation(s,l,o){s.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,h=>{if(this.getPartNumbers(l,o).length===0)h.hide();else if(o===r.ACCESSORIES){const f=!!this.getPartNumbers(l,r.RELATED_PRODUCTS).length,m=!!this.getValue(l,r.PRODUCT_GUIDE);f||m?h.getTags().find(y=>y==="pos:1")&&h.hide():h.getTags().find(y=>y==="pos:2")&&h.hide()}})}registerOverlayClick(s,l,o,h){s.on(this.CerosSDK.EVENTS.CLICKED,c=>__awaiter(this,void 0,void 0,function*(){if(this.doubleClickBugHandler.isDoubleClickBug(c.id))return;const f=this.getPartNumbers(l,o);if(!f.length)return;yield this.loadCsvData(o,h);const m=this.getExistingParts(o,f);m.length&&(o===r.RELATED_PRODUCTS?(this.updateRelatedProductsModules(m),this.triggerHotspot(o,m.length,this.maxRelatedProducts)):o===r.ACCESSORIES&&(this.updateAccessoriesModules(m),this.triggerHotspot(o,m.length,this.maxAccessories)))}))}triggerHotspot(s,l,o){this.experience.findComponentsByTag(`${s}-${l<=o?l:`${o+1}+`}`).click()}getPartNumbers(s,l){const o=this.getValue(s,l);return o?o.split(r.DIVIDER).map(h=>h.replace(" ","")):[]}getValue(s,l){return this.resultModulesHandler.getResultData(s).data[l]}getExistingParts(s,l){const o=[];return l.forEach(h=>{this.csvData[s][h]?o.push(this.csvData[s][h]):console.error(`could not find part: ${h} from ${s}!`)}),o}loadCsvData(s,l){return new Promise((o,h)=>{this.csvData[s]&&Object.keys(this.csvData[s]).length>0?o(this.csvData[s]):this.PapaParse.parse(l,{header:!0,download:!0,complete:c=>{const f=this.indexByPartNumber(c.data);this.csvData[s]=f,o(this.csvData[s])},error:c=>h(c)})})}indexByPartNumber(s){const l={};return s.forEach(o=>{l[o.part.trim()]=o}),l}}t.ResultHandler=a}),define("modules/questionStrategies/QuestionStrategy",["require","exports","../constants","../Observer"],function(S,t,r,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionStrategy=void 0;class g{constructor(i,e,n){this.name=i,this.experience=e,this.CerosSDK=n,this.key="value",this.optionsCollection=e.findComponentsByTag(`q:${i}`),this.pathNavigationCollection=e.findLayersByTag(`nav:${i}`),this.selectedOption=new p.NonStrictObservable(`${i}:${this.key}:`)}displayPathNavigation(i){i===r.PATH2?this.experience.findComponentsByTag("show-path2-nav").click():this.experience.findComponentsByTag("show-path1-nav").click()}}t.QuestionStrategy=g}),define("modules/questionStrategies/MaskingOptionsStrategy",["require","exports","./QuestionStrategy"],function(S,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaskingOptionsStrategy=void 0;class p extends r.QuestionStrategy{constructor(d,i,e,n){super(d,i,e),this.currentNodeObservable=n,this.key="value",this.maskCollection=this.experience.findLayersByTag(`mask:${this.name}`),this.registerCerosEvents(),this.registerMaskAnimations()}registerCerosEvents(){this.optionsCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleOptionClick.bind(this))}handleOptionClick(d){const i=d.getPayload().trim()||"",e=this.selectedOption.value.split(":");e[1]=this.key,e[2]=i,this.selectedOption.value=e.join(":")}displayAnswerOptions(d){this.maskCollection.layers.forEach(i=>{d.findChildByValueProperty(i.getPayload().trim())?i.hide():i.show()})}handleMasks(d,i){i.findChildByValueProperty(d.getPayload().trim())&&d.hide()}registerMaskAnimations(){this.maskCollection.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,d=>{this.handleMasks(d,this.currentNodeObservable.value)})}}t.MaskingOptionsStrategy=p}),define("modules/questionStrategies/MaskOptionsStrateyWithMultipleCellValues",["require","exports","./MaskingOptionsStrategy"],function(S,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaskingOptionsStrategyWithMultipleCellValues=void 0;class p extends r.MaskingOptionsStrategy{handleMasks(d,i){i.findChildThatIncludesValue(d.getPayload().trim())?d.hide():d.show()}}t.MaskingOptionsStrategyWithMultipleCellValues=p}),define("modules/questionStrategies/MaskingOptionsWithSubCategoriesStrategy",["require","exports","./MaskingOptionsStrategy"],function(S,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaskingOptionsWithSubcategoriesStrategy=void 0;class p extends r.MaskingOptionsStrategy{displayAnswerOptions(d){console.log(d.name),this.experience.findLayersByTag(`cat:${d.children[0].name}`).layers.forEach(e=>{e.getPayload().trim()===d.value?e.show():e.hide()}),this.maskCollection.layers.forEach(e=>{this.handleMasks(e,d)})}}t.MaskingOptionsWithSubcategoriesStrategy=p}),define("modules/questionStrategies/HidingOptionsStrategy",["require","exports","./QuestionStrategy","../utils"],function(S,t,r,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HidingOptionsStrategy=void 0;class g extends r.QuestionStrategy{constructor(i,e,n){super(i,e,n),this.key="elementId",this.isMobile=(0,p.isMobile)(e),this.isTablet=this.experience.findComponentsByTag("tablet").components.length>0,this.evenOptions=this.experience.findLayersByTag(`${i.toLowerCase()}_even`),this.oddOptions=this.experience.findLayersByTag(`${i.toLowerCase()}_odd`),this.registerCerosEvents()}registerCerosEvents(){this.optionsCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleOptionClick.bind(this))}handleOptionClick(i){const e=i.id,n=this.selectedOption.value.split(":");n[1]=this.key,n[2]=e,this.selectedOption.value=n.join(":")}displayAnswerOptions(i){const e=i.children.sort((n,a)=>Number(n.value)-Number(a.value));if(this.isMobile||this.isTablet){console.log("MOBILE LAYOUT!");let n=[],a=[];e.length===4?(n=e.slice(0,2),a=e.slice(2)):(n=e.slice(0,3),a=e.slice(3)),this.displayMobileLayoutOptions(n,1),a.length?this.displayMobileLayoutOptions(a,2):this.hideMobileOptionsRow(2)}else this.displayLayoutOptions(e,this.handleTextOptions)}hideMobileOptionsRow(i){const e=this.experience.findLayersByTag(`${this.name}-${i}-odd`),n=this.experience.findLayersByTag(`${this.name}-${i}-even`);e.hide(),n.hide()}displayMobileLayoutOptions(i,e){const n=this.experience.findLayersByTag(`${this.name}-${e}-odd`),a=this.experience.findLayersByTag(`${this.name}-${e}-even`);i.length%2===0?(n.hide(),a.show(),this.handleMobileTextOptions(a,i)):(n.show(),a.hide(),this.handleMobileTextOptions(n,i))}displayLayoutOptions(i,e){i.length%2===0?(this.oddOptions.hide(),this.evenOptions.show(),e(this.evenOptions,i)):(this.oddOptions.show(),this.evenOptions.hide(),e(this.oddOptions,i))}handleTextOptions(i,e){const n=i.layers[0].findAllComponents(),a=n.layersByTag.answer.length,u=Math.floor((a-e.length)/2);let s=0;n.components.forEach(l=>{if(l.type==="text"){const o=s-u;s>=u&&o<e.length?(l.setText(e[o].value),e[o].elementId=l.id):l.hide(),s++}else l.type==="line"&&this.handleLineDivider(l,u,e)})}handleLineDivider(i,e,n){const a=Number(i.getPayload());a?a>e&&a-e<n.length||i.hide():console.error(`there is no position number in payload of divider line with id ${i.id} in question ${n[0].name}`)}handleMobileTextOptions(i,e){const n=i.layers[0].findAllComponents();e.length===1?this.handleOneOptionInMobileView(e,n):this.handleTextOptions(i,e)}handleOneOptionInMobileView(i,e){let n=0;e.layers.forEach(a=>{a.type==="text"?(n===1?(a.setText(i[0].value),i[0].elementId=a.id):a.hide(),n++):a.hide()})}}t.HidingOptionsStrategy=g}),define("modules/questionStrategies/SliderOptionsStrategy",["require","exports","../Observer","./QuestionStrategy"],function(S,t,r,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderOptionsStrategy=void 0;class g extends p.QuestionStrategy{constructor(i,e,n){super(i,e,n),this.currentIndex=new r.Observable(0),this.sliderValues=[],this.nextButtonMask=e.findLayersByTag(`${i}-mask`),this.nextButton=e.findLayersByTag(`${i}-next`),this.singleOptionCollection=e.findLayersByTag("single-option"),this.sliderContainer=document.getElementById("slider-container"),this.output=document.getElementById("slider-value"),this.slider=null,this.registerCerosEvents(),this.subscribeToObservables()}subscribeToObservables(){this.currentIndex.subscribe(this.handleNextButtonDisplay.bind(this)),this.currentIndex.subscribe(this.updateSliderBackground.bind(this)),this.currentIndex.subscribe(this.updateSliderValuePosition.bind(this))}registerCerosEvents(){this.optionsCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleOptionClick.bind(this))}handleNextButtonDisplay(i){i>0?(this.nextButtonMask.hide(),this.nextButton.show()):(this.nextButton.hide(),this.nextButtonMask.show())}handleOptionClick(i){const e=this.sliderValues.length===2?this.sliderValues[1].toString():this.sliderValues[this.currentIndex.value].toString(),n=this.selectedOption.value.split(":");n[1]=this.key,n[2]=e,this.selectedOption.value=n.join(":")}getSliderContainer(){return this.sliderContainer}getOutput(){return this.output}displayAnswerOptions(i){const e=i.children.map(n=>Number(n.value));if(this.slider&&(this.slider.remove(),this.slider=null),this.sliderContainer&&this.output)this.displayOutput(e,this.sliderContainer,this.output);else{const n=setInterval(()=>{const a=document.getElementById("slider-container"),u=document.getElementById("slider-value");a&&u&&(clearInterval(n),this.sliderContainer=a,this.output=u,this.displayOutput(e,this.sliderContainer,this.output))},200)}}displayOutput(i,e,n){this.sliderValues=[0,...i],console.log(this.sliderValues),i.length>1?(this.singleOptionCollection.hide(),this.displaySlider(e,n),this.slider&&(this.currentIndex.value=0,this.slider.style.display="block",this.output&&(this.output.style.display="block"),this.handleNextButtonDisplay(this.currentIndex.value))):(this.slider&&(this.slider.style.display="none"),this.output&&(this.output.style.display="none"),this.nextButton.hide(),this.nextButtonMask.hide(),this.displaySingleOption(i))}displaySingleOption(i){this.singleOptionCollection.layers.forEach(e=>e.setText(`${i[0]}`)),this.singleOptionCollection.show()}displaySlider(i,e){this.registerNewSlider(i,e)}registerNewSlider(i,e){const n=this.getSlider(i);this.slider=n,this.slider.addEventListener("input",a=>{const u=a.target;u&&!isNaN(Number(u.value))&&(this.currentIndex.value=parseInt(u.value,10))}),this.updateSliderValuePosition()}updateSliderValuePosition(){if(console.log(`index: ${this.currentIndex.value}`),console.log(`value: ${this.sliderValues[this.currentIndex.value]}`),this.slider&&this.output){const i=this.currentIndex.value/(this.sliderValues.length-1),e=this.slider.offsetWidth,n=32,a=this.slider.offsetLeft,u=i*(e-n)+n/2;this.output.style.left=`${a+u}px`,this.output.textContent=this.currentIndex.value===0?"A":`${this.sliderValues[this.currentIndex.value]}A`}}updateSliderBackground(){if(this.slider){const i=this.currentIndex.value/(this.sliderValues.length-1)*100,e=`linear-gradient(to right, #5CC883 0%, #008752 ${i}%, #ccc ${i}%, #ccc 100%)`;this.slider.style.background=e}}getSlider(i){const e=i.querySelector("#customSlider");if(e)return e;{const n=this.createSlider(this.sliderValues.length-1);return i.prepend(n),n}}createSlider(i){const e=document.createElement("input");return e.type="range",e.id="customSlider",e.min="0",e.max=i.toString(),e.value="0",e}}t.SliderOptionsStrategy=g}),define("modules/moduleStrategies/PartModuleHandler",["require","exports","./ModuleHandler","../constants","../utils"],function(S,t,r,p,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartModuleHandler=void 0;class d extends r.ModuleHandler{constructor(e,n,a,u,s){super(e,n,a),this.qName=u,this.selectedOption=s}processLayers(e,n){console.log("proccessing part layers"),e[p.IMAGE]&&this.showImageFromUrl(n,this.displayPartImage.bind(this),e[p.IMAGE]),e[this.qName]&&this.updateResultTextbox(this.qName,n,e[this.qName]),e[p.FUSE_STYLE_INFO]&&this.updateResultTextbox(p.FUSE_STYLE_INFO,n,e[p.FUSE_STYLE_INFO]),e[`q:${this.qName}`]&&this.registerOptionClick(this.qName,n,e[`q:${this.qName}`])}registerOptionClick(e,n,a){a.forEach(u=>{u.on(this.CerosSDK.EVENTS.CLICKED,()=>{const l=this.getResultData(n).data[e],o=this.selectedOption.value.split(":");o[2]=l,this.selectedOption.value=o.join(":")})})}displayPartImage(e,n){const a=n[`${this.qName.split("-")[0]} image`];(0,g.setImageUrl)(a,e)}}t.PartModuleHandler=d}),define("modules/questionStrategies/SegmentedOptionsStrategy",["require","exports","../constants","../moduleStrategies/PartModuleHandler","./QuestionStrategy","../moduleStrategies/TabNavHandler","../Carousel","../utils"],function(S,t,r,p,g,d,i,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentedOptionsStrategy=void 0;class n extends g.QuestionStrategy{constructor(u,s,l){super(u,s,l),this.maxParts=3,this.partModuleHandler=new p.PartModuleHandler(r.PARTS,s,l,u,this.selectedOption),this.tabNavHandler=new d.TabNavHandler(s,l,this.showResultModules.bind(this),r.SEGMENTS,r.FUSE_TYPE_INFO,`fuse type-${r.PATH2}`),this.maxParts=(0,e.isMobile)(s)?r.MOBILE_MAX_ITEMS:3,this.partsCarousel=new i.Carousel(this.maxParts,r.PARTS,l,s,this.partModuleHandler)}displayAnswerOptions(u){this.tabNavHandler.init(u),this.tabNavHandler.display()}showResultModules(u,s){this.updateResultModules(u,s),this.triggerHotspot(r.PARTS,u,this.maxParts)}updateResultModules(u,s){u<=this.maxParts?s.forEach((l,o)=>{this.partModuleHandler.updateModule(u,o,l.data)}):this.partsCarousel.init(s.map(l=>l.data))}triggerHotspot(u,s,l){this.experience.findComponentsByTag(`${u}-${s<=l?s:`${l+1}+`}`).click()}}t.SegmentedOptionsStrategy=n}),define("modules/questionStrategies/QuestionStrategyFactory",["require","exports","./MaskingOptionsStrategy","./MaskOptionsStrateyWithMultipleCellValues","./MaskingOptionsWithSubCategoriesStrategy","./HidingOptionsStrategy","./SliderOptionsStrategy","./SegmentedOptionsStrategy"],function(S,t,r,p,g,d,i,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionStrategyFactory=void 0;class n{static create(u,s,l,o,h){switch(s.questionStrategy){case"hiding":return new d.HidingOptionsStrategy(u,l,h);case"masking-with-subcategories":return new g.MaskingOptionsWithSubcategoriesStrategy(u,l,h,o);case"masking-with-mulitiple-cell-values":return new p.MaskingOptionsStrategyWithMultipleCellValues(u,l,h,o);case"slider":return new i.SliderOptionsStrategy(u,l,h);case"segments":return new e.SegmentedOptionsStrategy(u,l,h);case"masking":default:return new r.MaskingOptionsStrategy(u,l,h,o)}}}t.QuestionStrategyFactory=n});var __awaiter=this&&this.__awaiter||function(S,t,r,p){function g(d){return d instanceof r?d:new r(function(i){i(d)})}return new(r||(r=Promise))(function(d,i){function e(u){try{a(p.next(u))}catch(s){i(s)}}function n(u){try{a(p.throw(u))}catch(s){i(s)}}function a(u){u.done?d(u.value):g(u.value).then(e,n)}a((p=p.apply(S,t||[])).next())})};define("modules/QuizContext",["require","exports","./constants","./lib/NodeTree","./Observer","./utils","./ResultHandler","./DoubleClickBugHandler","./moduleStrategies/ProductModuleHandler","./questionStrategies/QuestionStrategyFactory","./moduleStrategies/ModuleHandler"],function(S,t,r,p,g,d,i,e,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuizContext=void 0;class s{constructor(o,h,c,f,m,y,C,T){this.CerosSDK=o,this.experience=h,this.distributor=f,this.relatedProductsLink=m,this.accessoriesLink=y,this.PapaParse=C,this.path2Link=T,this.questions={},this.imgLargeOverlayCollection=this.experience.findLayersByTag(r.IMG_LRG),this.imgLrgLink=new g.Observable(""),this.imgLrgCloseHotspotCollection=this.experience.findLayersByTag(`${r.IMG_LRG}-close`),this.path2NodeTree=null,this.currentTree=c,this.path1NodeTree=c,this.currentNode=new g.Observable(c.root),this.backLayersCollection=this.experience.findLayersByTag(r.BACK),this.navCollecttion=this.experience.findComponentsByTag(r.NAV),this.pathTextCollection=this.experience.findComponentsByTag(r.PATH),this.resetCollection=this.experience.findLayersByTag(r.RESET),this.mcaseAdapterCtaCollection=this.experience.findLayersByTag(`${r.MCASE_ADAPTER}-cta`),this.resultHandler=new i.ResultHandler(h,o,this.currentNode,f,m,y,C,this.imgLrgLink),this.mcaseAdapterModuleHandler=new n.ProductModuleHandler(r.MCASE_ADAPTER,h,o,f,this.resultHandler.landingPageProxy,this.imgLrgLink),this.doubleClickHandler=new e.DoubleClickBugHandler,this.init()}init(){this.subscribeCurrentNodeObserver(),this.subscribeToCerosEvents(),this.assignQuestionsStrategy(),this.registerImageOverlay()}registerImageOverlay(){this.imgLargeOverlayCollection.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,o=>{u.ModuleHandler.handleModuleImage(o,{image:this.imgLrgLink.value})}),this.imgLrgCloseHotspotCollection.on(this.CerosSDK.EVENTS.CLICKED,()=>{this.imgLrgLink.value=""}),this.imgLrgLink.subscribe(o=>{this.imgLargeOverlayCollection.layers.forEach(h=>{u.ModuleHandler.handleModuleImage(h,{image:o})})})}subscribeCurrentNodeObserver(){this.currentNode.subscribe(this.handleNodeChange.bind(this)),this.currentNode.subscribe(this.updatePath.bind(this))}assignQuestionsStrategy(){for(const o in r.fieldNodesDict){const h=r.fieldNodesDict[o];if(h.type==="question"){const c=a.QuestionStrategyFactory.create(o,h,this.experience,this.currentNode,this.CerosSDK);this.questions[o]=c,c.selectedOption.subscribe(this.handleSelectedAnswer.bind(this))}}}subscribeToCerosEvents(){this.backLayersCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleBackNavigation.bind(this)),this.navCollecttion.on(this.CerosSDK.EVENTS.CLICKED,this.handleRandomNavigation.bind(this)),this.resetCollection.on(this.CerosSDK.EVENTS.CLICKED,this.resetQuiz.bind(this)),this.mcaseAdapterCtaCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleMcaseAdapter.bind(this))}handleMcaseAdapter(o){return __awaiter(this,void 0,void 0,function*(){if(this.doubleClickHandler.isDoubleClickBug(o.id))return;const h=o.getPayload().trim();yield this.resultHandler.loadCsvData(r.RELATED_PRODUCTS,this.relatedProductsLink);const c=this.resultHandler.csvData[r.RELATED_PRODUCTS][h];c?(this.mcaseAdapterModuleHandler.updateModule(1,0,c),this.experience.findComponentsByTag(`${r.MCASE_ADAPTER}-1`).click()):console.error(`Could not find part ${h} in related products sheet`)})}resetQuiz(){this.currentNode.value=this.currentTree.root}handleSelectedAnswer(o){return __awaiter(this,void 0,void 0,function*(){const[h,c,f]=o.split(":");h==="fuse type"&&(f.toLowerCase()==="guide me"?this.currentTree=yield this.loadCsvDataIntoNodeTree():this.currentTree=this.path1NodeTree,this.currentNode.value=this.currentTree.root);const m=this.currentTree.findChild(this.currentNode.value,c,f);m?this.updateCurrentNodeValue(m,h,f):console.error(`coudn't find node with ${h} and value ${f}`)})}updateCurrentNodeValue(o,h,c){r.fieldNodesDict[h].skipif&&r.fieldNodesDict[h].skipif.find(f=>f===c)&&o.children.length?this.currentNode.value=o.children[0]:this.currentNode.value=o}loadCsvDataIntoNodeTree(){if(this.path2NodeTree)return Promise.resolve(this.path2NodeTree);const o=new p.NodeTree(r.fieldNodesDict);return new Promise((h,c)=>{this.PapaParse.parse(this.path2Link,{header:!0,download:!0,complete:f=>{o.buildTree(f.data,r.path2Fields),o.mergeDataWithFields(this.path1NodeTree,o.root,r.transitionFields),this.path2NodeTree=o,h(o)},error:f=>c(f)})})}handleBackNavigation(o){if(this.doubleClickHandler.isDoubleClickBug(o.id))return;const h=this.currentNode.value,c=h.parent;if(!c)return;const f=h.name;console.log(`clicked back to ${h.name}`);const m=r.fieldNodesDict[f];if(m&&m.skipBackIf){const y=m.skipBackIf,C=Object.keys(y)[0],T=y[C],b=h.findParentByName(C);if(b&&T.find(E=>E===b.value)){this.currentNode.value=c.parent||c;return}}this.currentNode.value=c}handleRandomNavigation(o){if(this.doubleClickHandler.isDoubleClickBug(o.id))return;const h=o.getPayload().toLowerCase(),c=this.currentNode.value.findParentByName(h);c&&c.parent?this.currentNode.value=c.parent:console.error(`Could not find node ${h} or it's parent`)}handleNodeChange(o){if(o.children.length){if(this.isLastQuestion(o)){const h=this.currentTree===this.path1NodeTree?r.PATH1:r.PATH2;this.resultHandler.showResultModule(o.children.length,h),this.handlePathNavigation(this.resultHandler)}else{const h=o.children[0].name.toLowerCase(),c=this.questions[h];c&&(c.displayAnswerOptions(o),this.handlePathNavigation(c))}console.log(this.currentNode.value)}}handlePathNavigation(o){this.currentTree===this.path2NodeTree?o.displayPathNavigation(r.PATH2):o.displayPathNavigation(r.PATH1)}updatePath(o){let h=o;const c=[];h.getPath().forEach(({name:m,value:y})=>{if(m==="Root")return;const T=(m==="fuse type"&&this.currentTree===this.path2NodeTree?"{{}}":r.fieldNodesDict[m].pathText).replace("{{}}",(0,d.capitalize)(y));c.push(T)}),c.length?this.pathTextCollection.setText(c.join("  >  ")):this.pathTextCollection.setText(""),this.pathTextCollection.show()}isLastQuestion(o){return o.children[0].name==="part"}}t.QuizContext=s});const script=document.getElementById("fuse-holders");if(script===null)throw Error("Could not find script fuse-holders");const link=script.getAttribute("data-link")||"",distributor=script.getAttribute("data-distributor")||"",relatedProductsLink=script.getAttribute("data-related-products")||"",accessoriesLink=script.getAttribute("data-accessories")||"",path2Link=script.getAttribute("data-path2")||"";typeof require<"u"&&typeof require=="function"&&(require.config({baseUrl:"https://ceros-projects.s3.us-east-2.amazonaws.com/littlefuse/fuse-holders/",paths:{CerosSDK:"//sdk.ceros.com/standalone-player-sdk-v5.min",PapaParse:"https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min"}}),require(["CerosSDK","PapaParse","modules/QuizContext","modules/lib/NodeTree","modules/constants","modules/utils"],function(S,t,r,p,g,d){S.findExperience().done(i=>{const e=d.stepsFromFieldNames(g.path1Fields,g.fieldNodesDict),n=new p.NodeTree(e);t.parse(link,{download:!0,header:!0,complete:a=>{n.buildTree(a.data,g.path1Fields),new r.QuizContext(S,i,n,distributor,relatedProductsLink,accessoriesLink,t,path2Link)}})}).fail(i=>{console.log(i)})})),define("main",function(){});
