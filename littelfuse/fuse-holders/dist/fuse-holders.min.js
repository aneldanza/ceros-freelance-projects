"use strict";define("modules/constants",["require","exports"],function(C,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MCASE_ADAPTER=i.MAX_ACCESSORIES=i.MAX_RELATED_PRODUCTS=i.DIVIDER=i.ACCESSORIES=i.RELATED_PRODUCTS=i.NAV=i.BACK=i.PATH=i.PRODUCT_GUIDE=i.BUY_NOW=i.PRINT=i.DATASHEET=i.DESCRIPTION=i.IMAGE=i.PART=i.SERIES=i.SPECS=i.DELIMETER=i.RESET=i.QUESTION=i.OPTION=i.fieldNodesDict=void 0,i.fieldNodesDict={"fuse type":{type:"question",pathText:"Fuse Type: {{}}"},"fuse style":{type:"question",pathText:"Fuse Style: {{}}",questionStrategy:"masking-with-subcategories"},"max voltage":{type:"question",pathText:"Volts: {{}}V DC",questionStrategy:"hiding"},"max current":{type:"question",pathText:"Amps: {{}}A",questionStrategy:"hiding"},"circuit option":{type:"question",pathText:"Circuit Option: {{}}",questionStrategy:"masking"},style:{type:"question",pathText:"Style: {{}}",questionStrategy:"masking",skipif:["PCBA","Fuse Block / PDM"]},"mounting method":{type:"question",pathText:"Mounting: {{}}",questionStrategy:"masking-with-subcategories",skipBackIf:{style:["PCBA","Fuse Block / PDM"]}},protection:{type:"question",pathText:"Protection: {{}}",questionStrategy:"masking"},part:{type:"result",pathText:""}},i.OPTION="answer",i.QUESTION="q",i.RESET="reset",i.DELIMETER=":",i.SPECS="specs",i.SERIES="series",i.PART="part",i.IMAGE="img",i.DESCRIPTION="description",i.DATASHEET="datasheet",i.PRINT="2d print",i.BUY_NOW="buy-now",i.PRODUCT_GUIDE="product guide",i.PATH="path",i.BACK="back",i.NAV="nav",i.RELATED_PRODUCTS="related products",i.ACCESSORIES="accessories",i.DIVIDER=";",i.MAX_RELATED_PRODUCTS=2,i.MAX_ACCESSORIES=4,i.MCASE_ADAPTER="mcase-adapter"}),define("modules/Observer",["require","exports"],function(C,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Observable=i.Observer=void 0;class s{constructor(){this.subscribers=new Set}subscribe(e){this.subscribers.add(e)}notify(e){this.subscribers.forEach(t=>t(e))}}i.Observer=s;class c extends s{constructor(e){super(),this._value=e}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.notify(this._value))}}i.Observable=c}),define("modules/utils",["require","exports","./constants"],function(C,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.capitalize=i.getValueFromTags=void 0;const c=(e,t,o=s.DELIMETER)=>{const l=e.find(n=>n.trim().startsWith(`${t}${o}`));return l?l.split(s.DELIMETER)[1].trim():""};i.getValueFromTags=c;const h=e=>e?e.split(" ").map(o=>o[0].toUpperCase()+o.slice(1)).join(" "):"";i.capitalize=h}),define("modules/questionStrategies/QuestionStrategy",["require","exports"],function(C,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.QuestionStrategy=void 0;class s{constructor(h,e){this.name=h,this.experience=e}}i.QuestionStrategy=s}),define("modules/questionStrategies/HidingOptionsStrategy",["require","exports","./QuestionStrategy"],function(C,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HidingOptionsStrategy=void 0;class c extends s.QuestionStrategy{constructor(e,t){super(e,t),this.isMobile=this.experience.findComponentsByTag("mobile").components.length>0,this.isTablet=this.experience.findComponentsByTag("tablet").components.length>0}displayAnswerOptions(e){const t=e.children.sort((n,r)=>Number(n.value)-Number(r.value)),o=this.experience.findLayersByTag(`${e.children[0].name.toLowerCase()}_even`),l=this.experience.findLayersByTag(`${e.children[0].name.toLowerCase()}_odd`);this.isMobile||this.isTablet?console.log("MOBILE LAYOUT!"):this.displayDesktopLayoutOptions(l,o,t)}displayDesktopLayoutOptions(e,t,o){o.length%2===0?(e.hide(),t.show(),this.handleTextOptions(t,o)):(e.show(),t.hide(),this.handleTextOptions(e,o))}handleTextOptions(e,t){const o=e.layers[0].findAllComponents(),l=o.layersByTag.answer.length,n=Math.floor((l-t.length)/2);let r=0;o.components.forEach(a=>{if(a.type==="text"){const f=r-n;r>=n&&f<t.length?(a.setText(t[f].value),t[f].elementId=a.id):a.hide(),r++}else a.type==="line"&&this.handleLineDivider(a,n,t)})}handleLineDivider(e,t,o){const l=isNaN(Number(e.getPayload()))?null:Number(e.getPayload());l?l>t&&l-t<o.length||e.hide():console.error(`there is no position number in payload of divider line with id ${e.id} in question ${o[0].name}`)}}i.HidingOptionsStrategy=c}),define("modules/questionStrategies/MaskingOptionsStrategy",["require","exports","./QuestionStrategy"],function(C,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MaskingOptionsStrategy=void 0;class c extends s.QuestionStrategy{constructor(e,t,o,l){super(e,t),this.currentNodeObservable=o,this.CerosSDK=l,this.maskCollection=this.experience.findLayersByTag(`mask:${this.name}`)}displayAnswerOptions(e){this.maskCollection.layers.forEach(t=>{this.handleMasks(t,e)})}handleMasks(e,t){t.findChildByValueProperty(e.getPayload().trim())?e.hide():e.show()}registerMaskAnimations(){this.maskCollection.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,e=>{this.handleMasks(e,this.currentNodeObservable.value)})}}i.MaskingOptionsStrategy=c}),define("modules/DoubleClickBugHandler",["require","exports"],function(C,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DoubleClickBugHandler=void 0;class s{constructor(){this.clickObjectTimeTracker={}}isDoubleClickBug(h){const e=Date.now(),t=this.clickObjectTimeTracker[h];if(this.clickObjectTimeTracker[h]=e,t){const o=e-t;return console.log(o),o<900}}}i.DoubleClickBugHandler=s}),define("modules/LandinPageProxy",["require","exports","./DoubleClickBugHandler"],function(C,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.LandingPageProxy=void 0;class c{constructor(){this.windowObjectReference=null,this.doubleClickBugHandler=new s.DoubleClickBugHandler,this.isPreview=window.self==window.top&&window.location.hostname.includes(".preview.ceros")}sendUAEvent(e){if(window.self!==window.top){const t={event_category:"CEROS",event_label:e,event_action:"outbound_link_click"};parent.postMessage(JSON.stringify(t),"*")}else window.dataLayer.push({event:"ceros-event",cerosAction:"ceros_outbound_link_click",cerosCategory:"CEROS",cerosLabel:e}),this.openRequestedSingleTab(e)}openRequestedSingleTab(e){this.windowObjectReference===null||this.windowObjectReference.closed?this.windowObjectReference=window.open(e,"_blank"):(this.windowObjectReference=window.open(e,"_blank"),this.windowObjectReference.focus())}openAndTrackLink(e,t){this.doubleClickBugHandler.isDoubleClickBug(t)||(this.isPreview?this.openRequestedSingleTab(e):this.sendUAEvent(e))}}i.LandingPageProxy=c}),define("modules/ModuleHandler",["require","exports","./constants"],function(C,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ModuleHandler=void 0;class c{constructor(e,t,o,l,n){this.moduleName=e,this.experience=t,this.CerosSDK=o,this.distributor=l,this.landingPageProxy=n,this.moduleDict={},this.isNew=!1}hideModule(e,t){const o=this.getModuleTag(e,t),l=this.experience.findLayersByTag(o);if(!l.layers.length){console.error(`No module found with tag: ${o}`);return}l.hide()}updateModule(e,t,o,l){const n=this.getModuleTag(e,t),r=this.experience.findLayersByTag(n);if(!r.layers.length){console.error(`No module found with tag: ${n}`);return}const f=r.layers[0].findAllComponents().layersByTag,d=e.toString();this.moduleDict[d]=this.moduleDict[d]||{},this.isNew=!this.moduleDict[d][n],this.moduleDict[d][n]||(this.moduleDict[d][n]={data:{},layers:{}}),this.moduleDict[d][n].data=o,this.moduleDict[d][n].layers=f,this.processLayers(f,n),l&&l(f,n),console.log(this.moduleDict),r.show()}getModuleTag(e,t){return e>1?`${e}-${this.moduleName}-${t+1}`:`${e}-${this.moduleName}`}processLayers(e,t){e[s.IMAGE]&&this.showImageFromUrl(t,this.handleModuleImage,e[s.IMAGE]),e[s.PART]&&this.updateResultTextbox(s.PART,t,e[s.PART]),e[s.SERIES]&&this.updateResultTextbox(s.SERIES,t,e[s.SERIES]),e[s.DATASHEET]&&this.registerResultClcikEvent(e[s.DATASHEET],s.DATASHEET,t),e[s.PRINT]&&this.registerResultClcikEvent(e[s.PRINT],s.PRINT,t),e[s.BUY_NOW]&&this.registerResultClcikEvent(e[s.BUY_NOW],this.distributor,t),e[s.PRODUCT_GUIDE]&&this.registerResultClcikEvent(e[s.PRODUCT_GUIDE],s.PRODUCT_GUIDE,t),e[s.SPECS]&&this.updateResultTextbox(s.SPECS,t,e[s.SPECS]),e[s.DESCRIPTION]&&this.updateResultTextbox(s.DESCRIPTION,t,e[s.DESCRIPTION])}showImageFromUrl(e,t,o){o.forEach(l=>{const n=this.getResultData(e);t(l,n.data),this.isNew&&l.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,r=>{const a=this.getResultData(e);t(r,a.data)})})}updateResultTextbox(e,t,o){o.forEach(l=>{const n=this.getResultData(t);l.setText(n.data[e]),this.isNew&&l.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,r=>{const a=this.getResultData(t);r.setText(a.data[e])})})}registerResultClcikEvent(e,t,o){e.forEach(l=>{l.on(this.CerosSDK.EVENTS.CLICKED,()=>{const n=this.getResultData(o);this.landingPageProxy.openAndTrackLink(n.data[t],l.id)}),l.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,n=>{this.getResultData(o).data[t]||n.hide()})})}handleModuleImage(e,t){const o=t.image;try{new URL(o),e.setUrl(o)}catch(l){console.error(l),e.setUrl("https://admin.ceros.com/v1/account/littelfuse/images/2025-06-17-60ecf7d1a494b7d0760c289a69b27a44-product-image-place-holder-jpg/proxy")}}getResultData(e){const t=e.split("-")[0];return this.moduleDict[t][e]}}i.ModuleHandler=c}),define("modules/Carousel",["require","exports","./Observer","./DoubleClickBugHandler"],function(C,i,s,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Carousel=void 0;class h{constructor(t,o,l,n,r){this.max=t,this.name=o,this.CerosSDK=l,this.experience=n,this.moduleHandler=r,this.currentPage=new s.Observable(0),this.parts=[],this.next=this.experience.findLayersByTag(`${this.name}-next`),this.back=this.experience.findLayersByTag(`${this.name}-back`),this.currentIndex=this.experience.findComponentsByTag(`${this.name}-current`),this.totalIndex=this.experience.findComponentsByTag(`${this.name}-total`),this.pages={},this.doubleClickBugHandler=new c.DoubleClickBugHandler,this.registerNavigationEvents()}init(t){this.pages={},this.parts=t,this.paginate(),this.setTotalPageIndex(),this.currentPage.value=1}paginate(){let t=0,o=1;for(;t<this.parts.length;){const l=t+this.max<this.parts.length?t+this.max:this.parts.length;this.pages[o]=this.parts.slice(t,l),t=t+this.max,o++}console.log(this.pages)}registerNavigationEvents(){this.next.on(this.CerosSDK.EVENTS.CLICKED,t=>{this.doubleClickBugHandler.isDoubleClickBug(t.id)||(this.currentPage.value++,console.log(this.currentPage.value))}),this.back.on(this.CerosSDK.EVENTS.CLICKED,t=>{this.doubleClickBugHandler.isDoubleClickBug(t.id)||this.currentPage.value--}),this.next.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,()=>{this.isLastPage()&&this.next.hide()}),this.back.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,()=>{this.isFirstPage()&&this.back.hide()}),this.currentPage.subscribe(()=>{this.hideModules(),this.updatePageIndex(),this.populate(),this.isLastPage()?this.next.hide():this.next.show(),this.isFirstPage()?this.back.hide():this.back.show()})}populate(){let t=0;const o=this.pages[this.currentPage.value];for(;t<this.max&&t<o.length;){const l=o[t];l&&this.moduleHandler.updateModule(this.max,t,l),t++}}hideModules(){let t=0;for(;t<this.max;)this.moduleHandler.hideModule(this.max,t),t++}updatePageIndex(){this.currentIndex.components.forEach(t=>t.setText(this.currentPage.value.toString()))}setTotalPageIndex(){const t=Object.keys(this.pages);this.totalIndex.components.forEach(o=>o.setText(t[t.length-1]))}isLastPage(){const t=Object.keys(this.pages);return this.currentPage.value===Number(t[t.length-1])}isFirstPage(){return this.currentPage.value===1}}i.Carousel=h});var __awaiter=this&&this.__awaiter||function(C,i,s,c){function h(e){return e instanceof s?e:new s(function(t){t(e)})}return new(s||(s=Promise))(function(e,t){function o(r){try{n(c.next(r))}catch(a){t(a)}}function l(r){try{n(c.throw(r))}catch(a){t(a)}}function n(r){r.done?e(r.value):h(r.value).then(o,l)}n((c=c.apply(C,i||[])).next())})};define("modules/ResultHandler",["require","exports","./constants","./LandinPageProxy","./ModuleHandler","./DoubleClickBugHandler","./Carousel"],function(C,i,s,c,h,e,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ResultHandler=void 0;class o{constructor(n,r,a,f,d,u,g){this.experience=n,this.CerosSDK=r,this.currentNodeObservable=a,this.distributor=f,this.relatedProductsLink=d,this.accessoriesLink=u,this.PapaParse=g,this.csvData={"related products":{},accessories:{}},this.doubleClickBugHandler=new e.DoubleClickBugHandler,this.landingPageProxy=new c.LandingPageProxy,this.resultModulesHandler=new h.ModuleHandler("module",n,r,f,this.landingPageProxy),this.relatedProductsModulesHandler=new h.ModuleHandler(s.RELATED_PRODUCTS,n,r,f,this.landingPageProxy),this.accessoriesModulesHandler=new h.ModuleHandler(s.ACCESSORIES,n,r,f,this.landingPageProxy),this.accessoriesCarousel=new t.Carousel(s.MAX_ACCESSORIES,s.ACCESSORIES,r,n,this.accessoriesModulesHandler),this.relatedProductsCarousel=new t.Carousel(s.MAX_RELATED_PRODUCTS,s.RELATED_PRODUCTS,r,n,this.relatedProductsModulesHandler)}showResultModule(n){this.updateResultModules(n),this.experience.findComponentsByTag(`module-${n}`).click()}updateResultModules(n){this.currentNodeObservable.value.children.forEach((r,a)=>{this.resultModulesHandler.updateModule(n,a,r.data,this.processOverlayLayers.bind(this))})}processOverlayLayers(n,r){n[s.RELATED_PRODUCTS]&&this.handleOverlay(s.RELATED_PRODUCTS,n[s.RELATED_PRODUCTS],r,this.relatedProductsLink),n[s.ACCESSORIES]&&this.handleOverlay(s.ACCESSORIES,n[s.ACCESSORIES],r,this.accessoriesLink)}updateRelatedProductsModules(n){n.length<=s.MAX_RELATED_PRODUCTS?n.forEach((r,a)=>{this.relatedProductsModulesHandler.updateModule(n.length,a,r)}):this.relatedProductsCarousel.init(n)}updateAccessoriesModules(n){n.length<=s.MAX_ACCESSORIES?n.forEach((r,a)=>{this.accessoriesModulesHandler.updateModule(n.length,a,r)}):this.accessoriesCarousel.init(n)}handleOverlay(n,r,a,f){r.forEach(d=>{this.registerOverlayAnimation(d,a,n),this.registerOverlayClick(d,a,n,f)})}registerOverlayAnimation(n,r,a){n.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,f=>{if(this.getRelatedParts(r,a).length===0)f.hide();else if(a===s.ACCESSORIES){const u=!!this.getRelatedParts(r,s.RELATED_PRODUCTS).length,g=!!this.getValue(r,s.PRODUCT_GUIDE);u||g?f.getTags().find(E=>E==="pos:1")&&f.hide():f.getTags().find(E=>E==="pos:2")&&f.hide()}})}registerOverlayClick(n,r,a,f){n.on(this.CerosSDK.EVENTS.CLICKED,d=>__awaiter(this,void 0,void 0,function*(){if(this.doubleClickBugHandler.isDoubleClickBug(d.id))return;const u=this.getRelatedParts(r,a);if(!u.length)return;yield this.loadCsvData(a,f);const g=this.getExistingParts(a,u);if(!g.length)return;a===s.RELATED_PRODUCTS?this.updateRelatedProductsModules(g):a===s.ACCESSORIES&&this.updateAccessoriesModules(g),this.experience.findComponentsByTag(`${a}-${g.length<6?g.length:"4+"}`).click()}))}getRelatedParts(n,r){const a=this.getValue(n,r);return a?a.split(s.DIVIDER).map(d=>d.trim()):[]}getValue(n,r){return this.resultModulesHandler.getResultData(n).data[r]}getExistingParts(n,r){const a=[];return r.forEach(f=>{this.csvData[n][f]?a.push(this.csvData[n][f]):console.error(`could not find part: ${f} from ${n}!`)}),a}loadCsvData(n,r){return new Promise((a,f)=>{this.csvData[n]&&Object.keys(this.csvData[n]).length>0?a(this.csvData[n]):this.PapaParse.parse(r,{header:!0,download:!0,complete:d=>{const u=this.indexByPartNumber(d.data);this.csvData[n]=u,a(this.csvData[n])},error:d=>f(d)})})}indexByPartNumber(n){const r={};return n.forEach(a=>{r[a.part]=a}),r}}i.ResultHandler=o}),define("modules/questionStrategies/MaskingOptionsWithSubCategoriesStrategy",["require","exports","./MaskingOptionsStrategy"],function(C,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MaskingOptionsWithSubcategoriesStrategy=void 0;class c extends s.MaskingOptionsStrategy{displayAnswerOptions(e){console.log(e.name),this.experience.findLayersByTag(`cat:${e.children[0].name}`).layers.forEach(o=>{o.getPayload().trim()===e.value?o.show():o.hide()}),this.maskCollection.layers.forEach(o=>{this.handleMasks(o,e)})}}i.MaskingOptionsWithSubcategoriesStrategy=c});var __awaiter=this&&this.__awaiter||function(C,i,s,c){function h(e){return e instanceof s?e:new s(function(t){t(e)})}return new(s||(s=Promise))(function(e,t){function o(r){try{n(c.next(r))}catch(a){t(a)}}function l(r){try{n(c.throw(r))}catch(a){t(a)}}function n(r){r.done?e(r.value):h(r.value).then(o,l)}n((c=c.apply(C,i||[])).next())})};define("modules/QuizContext",["require","exports","./constants","./Observer","./utils","./questionStrategies/HidingOptionsStrategy","./questionStrategies/MaskingOptionsStrategy","./ResultHandler","./DoubleClickBugHandler","./questionStrategies/MaskingOptionsWithSubCategoriesStrategy","./ModuleHandler"],function(C,i,s,c,h,e,t,o,l,n,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.QuizContext=void 0;class a{constructor(d,u,g,E,p,T,S){this.CerosSDK=d,this.experience=u,this.nodeTree=g,this.distributor=E,this.relatedProductsLink=p,this.accessoriesLink=T,this.PapaParse=S,this.questions={},this.currentNode=new c.Observable(this.nodeTree.root),this.answerCollection=this.experience.findComponentsByTag(s.OPTION),this.backLayersCollection=this.experience.findLayersByTag(s.BACK),this.navCollecttion=this.experience.findComponentsByTag(s.NAV),this.pathTextCollection=this.experience.findComponentsByTag(s.PATH),this.resetCollection=this.experience.findLayersByTag(s.RESET),this.mcaseAdapterCtaCollection=this.experience.findLayersByTag(`${s.MCASE_ADAPTER}-cta`),this.resultHandler=new o.ResultHandler(u,d,this.currentNode,E,p,T,S),this.mcaseAdapterModuleHandler=new r.ModuleHandler(s.MCASE_ADAPTER,u,d,E,this.resultHandler.landingPageProxy),this.doubleClickHandler=new l.DoubleClickBugHandler,this.init()}init(){this.subscribeCurrentNodeObserver(),this.subscribeToCerosEvents(),this.assignQuestionsStrategy()}subscribeCurrentNodeObserver(){this.currentNode.subscribe(this.handleNodeChange.bind(this)),this.currentNode.subscribe(this.updatePath.bind(this))}assignQuestionsStrategy(){for(const d in s.fieldNodesDict){const u=s.fieldNodesDict[d];let g;u.type==="question"&&(u.questionStrategy==="hiding"?g=new e.HidingOptionsStrategy(d,this.experience):u.questionStrategy==="masking-with-subcategories"?g=new n.MaskingOptionsWithSubcategoriesStrategy(d,this.experience,this.currentNode,this.CerosSDK):g=new t.MaskingOptionsStrategy(d,this.experience,this.currentNode,this.CerosSDK),this.questions[d]=g)}}subscribeToCerosEvents(){this.answerCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleAnswerClick.bind(this)),this.backLayersCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleBackNavigation.bind(this)),this.navCollecttion.on(this.CerosSDK.EVENTS.CLICKED,this.handleRandomNavigation.bind(this)),this.resetCollection.on(this.CerosSDK.EVENTS.CLICKED,this.resetQuiz.bind(this)),this.mcaseAdapterCtaCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleMcaseAdapter.bind(this))}handleMcaseAdapter(d){return __awaiter(this,void 0,void 0,function*(){if(this.doubleClickHandler.isDoubleClickBug(d.id))return;const u=d.getPayload().trim();yield this.resultHandler.loadCsvData(s.RELATED_PRODUCTS,this.relatedProductsLink);const g=this.resultHandler.csvData[s.RELATED_PRODUCTS][u];g?(this.mcaseAdapterModuleHandler.updateModule(1,0,g),this.experience.findComponentsByTag(`${s.MCASE_ADAPTER}-1`).click()):console.error(`Could not find part ${u} in related products sheet`)})}resetQuiz(){this.currentNode.value=this.nodeTree.root}handleAnswerClick(d){if(this.doubleClickHandler.isDoubleClickBug(d.id))return;const u=(0,h.getValueFromTags)(d.getTags(),s.QUESTION),g=this.questions[u],E=d.getPayload().trim();if(!g){console.error(`Could not find question field ${u}`);return}const{key:p,value:T}=g instanceof e.HidingOptionsStrategy?{key:"elementId",value:d.id}:{key:"value",value:E},S=this.nodeTree.findChild(this.currentNode.value,p,T);if(S)if(s.fieldNodesDict[u].skipif&&s.fieldNodesDict[u].skipif.find(b=>b===E)){const b=S.children[0];this.currentNode.value=b}else this.currentNode.value=S;else console.error(`coudn't find node with ${u} and value ${T}`)}handleBackNavigation(d){if(this.doubleClickHandler.isDoubleClickBug(d.id))return;const u=this.currentNode.value,g=u.parent;if(!g)return;const E=u.name,p=s.fieldNodesDict[E];if(p&&p.skipBackIf){const T=p.skipBackIf,S=Object.keys(T)[0],b=T[S],y=u.findParentByName(S);if(y&&b.find(P=>P===y.value)){this.currentNode.value=g.parent||g;return}}this.currentNode.value=g}handleRandomNavigation(d){const u=d.getPayload().toLowerCase(),g=this.currentNode.value.findParentByName(u);g&&g.parent?this.currentNode.value=g.parent:console.error(`Could not find node ${u} or it's parent`)}handleNodeChange(d){if(d.children)if(this.isLastQuestion(d))this.resultHandler.showResultModule(d.children.length);else{console.log(this.currentNode.value);const u=d.children[0].name.toLowerCase();this.questions[u]&&this.questions[u].displayAnswerOptions(d)}}updatePath(d){let u=d;const g=[];u.getPath().forEach(({name:p,value:T})=>{if(p==="Root")return;const b=s.fieldNodesDict[p].pathText.replace("{{}}",(0,h.capitalize)(T));g.push(b)}),g.length?this.pathTextCollection.setText(g.join("  >  ")):this.pathTextCollection.setText(""),this.pathTextCollection.show()}isLastQuestion(d){const u=d.children[0];return Object.keys(u.data).length}}i.QuizContext=a}),define("modules/Node",["require","exports"],function(C,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Node=void 0;class s{constructor(h,e="",t=null){this.name=h,this.value=e,this.parent=t,this.children=[],this.elementId="",this.data={}}findChildByValueProperty(h){return this.children.find(e=>e.value.toLowerCase()===h.toLowerCase())||null}findParentByName(h){let e=this;for(;e;){if(e.name===h)return e;e=e.parent}}getPath(){const h=[];let e=this;for(;e;)h.unshift({name:e.name,value:e.value}),e=e.parent;return h}}i.Node=s}),define("modules/NodeTree",["require","exports","./Node"],function(C,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NodeTree=void 0;class c{constructor(e){this.fields=e,this.root=new s.Node("Root")}buildTree(e){e.forEach(t=>{this.addBranch(this.root,t)}),console.log(this.root)}addNewNode(e,t,o,l={}){const n=o.findChildByValueProperty(e);if(n)return n;{const r=new s.Node(t,e,o);return r.data=l,o.children.push(r),r}}addBranch(e,t){let o=e;const l=Object.keys(this.fields);for(let n=0;n<l.length;n++){const r=l[n].trim(),a=t[r].trim();this.fields[l[n]].type==="result"?o=this.addNewNode(a,r,o,t):o=this.addNewNode(a,r,o)}}findChild(e,t,o){return e.children.find(l=>l[t].toLowerCase()===o.toLowerCase().trim())}}i.NodeTree=c});const script=document.getElementById("fuse-holders");if(script===null)throw Error("Could not find script fuse-holders");const link=script.getAttribute("data-link")||"",distributor=script.getAttribute("data-distributor")||"",relatedProductsLink=script.getAttribute("data-related-products")||"",accessoriesLink=script.getAttribute("data-accessories")||"";typeof require<"u"&&typeof require=="function"&&(require.config({baseUrl:"http://127.0.0.1:5173/",paths:{CerosSDK:"//sdk.ceros.com/standalone-player-sdk-v5.min",PapaParse:"https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min"}}),require(["CerosSDK","PapaParse","modules/QuizContext","modules/NodeTree","modules/constants"],function(C,i,s,c,h){C.findExperience().done(e=>{const t=new c.NodeTree(h.fieldNodesDict);i.parse(link,{download:!0,header:!0,complete:o=>{t.buildTree(o.data),new s.QuizContext(C,e,t,distributor,relatedProductsLink,accessoriesLink,i)}})}).fail(e=>{console.log(e)})})),define("main",function(){});
