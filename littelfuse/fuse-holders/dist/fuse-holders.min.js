"use strict";define("modules/constants",["require","exports"],function(S,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_IMAGE=i.TAB=i.FUSE_TYPE_INFO=i.FUSE_STYLE_INFO=i.PATH1=i.PATH2=i.IMG_LRG=i.MCASE_ADAPTER=i.MAX_RESULTS=i.MAX_ACCESSORIES=i.MAX_RELATED_PRODUCTS=i.DIVIDER=i.SEGMENTS=i.PARTS=i.RESULTS=i.ACCESSORIES=i.RELATED_PRODUCTS=i.NAV=i.BACK=i.PATH=i.PRODUCT_GUIDE=i.BUY_NOW=i.PRINT=i.DATASHEET=i.DESCRIPTION=i.IMAGE=i.PART=i.SERIES=i.SPECS=i.DELIMETER=i.RESET=i.QUESTION=i.OPTION=i.fieldNodesDict=i.path1Fields=i.path2Fields=i.transitionFields=void 0,i.transitionFields={"fuse type":"fuse type-path2","fuse style":"fuse style-path2","max voltage":"max voltage-path2","max current":"max current-path2"},i.path2Fields=["fuse type","application voltage","application load","application amps","fuse style-path2"],i.path1Fields=["fuse type","fuse style","max voltage","max current","circuit option","style","mounting method","protection","part"],i.fieldNodesDict={"application voltage":{type:"question",pathText:"Voltage: {{}}"},"application load":{type:"question",pathText:"Load: {{}}",questionStrategy:"masking",multiValue:!0},"application amps":{type:"question",pathText:"Amps: {{}}",questionStrategy:"slider"},"fuse style-path2":{type:"question",pathText:"Style: {{}}",questionStrategy:"segments"},"max voltage-path2":{type:"question",pathText:"Volts: <={{}}V DC",breakKeys:!0},"max current-path2":{type:"question",pathText:"Amps: {{}}A",breakKeys:!0},"fuse type":{type:"question",pathText:"Fuse Type: {{}}"},"fuse type-path2":{type:"question",pathText:"{{}}"},"fuse style":{type:"question",pathText:"Fuse Style: {{}}",questionStrategy:"masking-with-subcategories"},"max voltage":{type:"question",pathText:"Volts: {{}}V DC",questionStrategy:"hiding"},"max current":{type:"question",pathText:"Amps: {{}}A",questionStrategy:"hiding"},"circuit option":{type:"question",pathText:"Circuit: {{}}",questionStrategy:"masking"},style:{type:"question",pathText:"Style: {{}}",questionStrategy:"masking",skipif:["PCBA","Fuse Block"]},"mounting method":{type:"question",pathText:"Mounting: {{}}",questionStrategy:"masking-with-subcategories",skipBackIf:{style:["PCBA","Fuse Block"]}},protection:{type:"question",pathText:"Protection: {{}}",questionStrategy:"masking"},part:{type:"result",pathText:""}},i.OPTION="answer",i.QUESTION="q",i.RESET="reset",i.DELIMETER=":",i.SPECS="specs",i.SERIES="series",i.PART="part",i.IMAGE="img",i.DESCRIPTION="description",i.DATASHEET="datasheet",i.PRINT="2d print",i.BUY_NOW="buy-now",i.PRODUCT_GUIDE="product guide",i.PATH="path",i.BACK="back",i.NAV="nav",i.RELATED_PRODUCTS="related products",i.ACCESSORIES="accessories",i.RESULTS="module",i.PARTS="part module",i.SEGMENTS="segment",i.DIVIDER=";",i.MAX_RELATED_PRODUCTS=2,i.MAX_ACCESSORIES=4,i.MAX_RESULTS=5,i.MCASE_ADAPTER="mcase-adapter",i.IMG_LRG="img lrg",i.PATH2="path2",i.PATH1="path1",i.FUSE_STYLE_INFO="fuse style info",i.FUSE_TYPE_INFO="fuse type info",i.TAB="tab",i.DEFAULT_IMAGE="https://ceros-projects.s3.us-east-2.amazonaws.com/littlefuse/fuse-holders/Image+Not+Available.jpg"}),define("modules/lib/Node",["require","exports"],function(S,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Node=void 0;class r{constructor(c,o="",e=null){this.name=c,this.value=o,this.parent=e,this.children=[],this.elementId="",this.data={}}findChildByValueProperty(c){return this.children.find(o=>o.value.toLowerCase()===c.toLowerCase())||null}findChildThatIncludesValue(c){return this.children.find(o=>o.value.toLowerCase()===c.toLowerCase())||null}findAllChildrenThatIncludeValue(c){return this.children.filter(o=>o.value.toLowerCase()===c.toLowerCase())||null}findParentByName(c){let o=this;for(;o;){if(o.name===c)return o;o=o.parent}}getPath(){const c=[];let o=this;for(;o;)c.unshift({name:o.name,value:o.value}),o=o.parent;return c}}i.Node=r}),define("modules/lib/treeHelpers",["require","exports","../constants"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MERGE_FIELDS_P1=void 0,i.makeKey=c,i.makeKeys=e,i.getChildrenByPath=s,i.getP1MergeValsFromP2Node=u,i.MERGE_FIELDS_P1=["fuse type","fuse style","max voltage","max current"];function g(t){return(t??"").trim().toLowerCase().replace(/\s+/g," ")}function c(t,a){return a.map(d=>g(t[d])||"\u2205").join("|")}function o(t,a,d=","){const l=Object.entries(t);let h=[{}];for(const[p,f]of l){const m=a[r.transitionFields[p]],y=f??"";h=(m?.breakKeys&&y.includes(d)?y.split(d).map(T=>T.trim()).filter(Boolean):[y]).flatMap(T=>h.map(b=>Object.assign(Object.assign({},b),{[p]:T})))}return h}function e(t,a,d){const l=[];return Object.keys(t).filter(f=>d[r.transitionFields[f]].breakKeys).length?o(t,d,",").forEach(m=>l.push(c(m,a))):l.push(c(t,a)),l}function s(t,a){const d=t.split("|");return n(0,a,d,[])}function n(t,a,d,l){return t===i.MERGE_FIELDS_P1.length?a.children:(a.findAllChildrenThatIncludeValue(d[t]).forEach(p=>{l=l.concat(n(t+1,p,d,l))}),l)}function u(t,a){const d={};for(const l of i.MERGE_FIELDS_P1){const h=a[l]||l,p=t.data[h];if(!p)return null;d[l]=p}return d}}),define("modules/lib/NodeTree",["require","exports","./Node","./treeHelpers","./treeHelpers"],function(S,i,r,g,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NodeTree=void 0;class o{constructor(s){this.fields=s,this.root=new r.Node("Root")}buildTree(s,n){s.forEach(u=>{this.addBranch(this.root,u,n)}),console.log(this.root)}addNewNode(s,n,u,t={}){const a=u.findChildByValueProperty(s);if(a)return a;{const d=new r.Node(n,s,u);return d.data=t,u.children.push(d),d}}addBranch(s,n,u){var t,a;let d=s;for(let l=0;l<u.length;l++){const h=u[l].trim(),p=(a=(t=n[h])===null||t===void 0?void 0:t.trim)===null||a===void 0?void 0:a.call(t);if(p){if(this.fields[h].multiValue){const f=u.slice(l+1);n[h].split(",").map(y=>y.trim()).forEach(y=>{let C;this.fields[h].type==="result"||this.fields[h].questionStrategy==="segments"||l===u.length-1?C=this.addNewNode(y,h,d,n):C=this.addNewNode(y,h,d),this.addBranch(C,n,f)});return}this.fields[h].type==="result"||this.fields[h].questionStrategy==="segments"||l===u.length-1?d=this.addNewNode(p,h,d,n):d=this.addNewNode(p,h,d)}}}mergeNodes(s,n,u){const t=(0,c.getP1MergeValsFromP2Node)(s,n);if(t){const a=(0,g.makeKeys)(t,g.MERGE_FIELDS_P1,this.fields);let d=[];a.forEach(l=>{const h=(0,g.getChildrenByPath)(l,u.root);d=[...d,...h]}),this.attachNewChildren(d,s)}}attachNewChildren(s,n){!s||s.length===0||s.forEach(u=>{const t=this.addNewNode(u.value,u.name,n,u.data),a=u.children;this.attachNewChildren(a,t)})}mergeDataWithFields(s,n,u){const t=a=>{if(a.children.length===0){this.mergeNodes(a,u,s);return}for(const d of a.children)t(d)};for(const a of n.children)t(a)}findChild(s,n,u){return s.children.find(t=>t[n].toLowerCase()===u.toLowerCase().trim())}}i.NodeTree=o}),define("modules/Observer",["require","exports"],function(S,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NonStrictObservable=i.Observable=i.Observer=void 0;class r{constructor(){this.subscribers=new Set}subscribe(e){this.subscribers.add(e)}notify(e){this.subscribers.forEach(s=>s(e))}}i.Observer=r;class g extends r{constructor(e){super(),this._value=e}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.notify(this._value))}}i.Observable=g;class c extends r{constructor(e){super(),this._value=e}get value(){return this._value}set value(e){this._value=e,this.notify(this._value)}}i.NonStrictObservable=c}),define("modules/utils",["require","exports","./constants"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.setImageUrl=i.getModuleTag=i.stepsFromFieldNames=i.capitalize=i.getValueFromTags=void 0;const g=(n,u,t=r.DELIMETER)=>{const a=n.find(d=>d.trim().startsWith(`${u}${t}`));return a?a.split(r.DELIMETER)[1].trim():""};i.getValueFromTags=g;const c=n=>n?n.split(" ").map(t=>t[0].toUpperCase()+t.slice(1)).join(" "):"";i.capitalize=c;const o=(n,u)=>{const t=n.map(a=>[a,u[a]]);return Object.fromEntries(t)};i.stepsFromFieldNames=o;const e=(n,u,t)=>n>1?`${n}-${t}-${u+1}`:`${n}-${t}`;i.getModuleTag=e;const s=(n,u)=>{try{new URL(n),u.setUrl(n)}catch(t){console.error(t),u.setUrl(r.DEFAULT_IMAGE)}};i.setImageUrl=s}),define("modules/DoubleClickBugHandler",["require","exports"],function(S,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DoubleClickBugHandler=void 0;class r{constructor(){this.clickObjectTimeTracker={}}isDoubleClickBug(c){const o=Date.now(),e=this.clickObjectTimeTracker[c];if(this.clickObjectTimeTracker[c]=o,e){const s=o-e;return console.log(s),s<900}}}i.DoubleClickBugHandler=r}),define("modules/LandinPageProxy",["require","exports","./DoubleClickBugHandler"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.LandingPageProxy=void 0;class g{constructor(){this.windowObjectReference=null,this.doubleClickBugHandler=new r.DoubleClickBugHandler,this.isPreview=window.self==window.top&&window.location.hostname.includes(".preview.ceros")}sendUAEvent(o){if(window.self!==window.top){const e={event_category:"CEROS",event_label:o,event_action:"outbound_link_click"};parent.postMessage(JSON.stringify(e),"*")}else window.dataLayer.push({event:"ceros-event",cerosAction:"ceros_outbound_link_click",cerosCategory:"CEROS",cerosLabel:o}),this.openRequestedSingleTab(o)}openRequestedSingleTab(o){this.windowObjectReference===null||this.windowObjectReference.closed?this.windowObjectReference=window.open(o,"_blank"):(this.windowObjectReference=window.open(o,"_blank"),this.windowObjectReference.focus())}openAndTrackLink(o,e){this.doubleClickBugHandler.isDoubleClickBug(e)||(this.isPreview?this.openRequestedSingleTab(o):this.sendUAEvent(o))}}i.LandingPageProxy=g}),define("modules/moduleStrategies/ModuleHandler",["require","exports","../utils","../DoubleClickBugHandler"],function(S,i,r,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ModuleHandler=void 0;class c{constructor(e,s,n){this.moduleName=e,this.experience=s,this.CerosSDK=n,this.moduleDict={},this.isNew=!1,this.doubleClickBugHandler=new g.DoubleClickBugHandler}static handleModuleImage(e,s){const n=s.image;(0,r.setImageUrl)(n,e)}updateModule(e,s,n,u){const t=(0,r.getModuleTag)(e,s,this.moduleName),a=this.experience.findLayersByTag(t);if(!a.layers.length){console.error(`No module found with tag: ${t}`);return}const l=a.layers[0].findAllComponents().layersByTag,h=e.toString();this.moduleDict[h]=this.moduleDict[h]||{},this.isNew=!this.moduleDict[h][t],this.moduleDict[h][t]||(this.moduleDict[h][t]={data:{},layers:{}}),this.moduleDict[h][t].data=n,this.moduleDict[h][t].layers=l,this.processLayers(l,t),u&&u(l,t),console.log(this.moduleDict),a.show()}showImageFromUrl(e,s,n,u){n.forEach(t=>{const a=this.getResultData(e);s(t,a.data),this.isNew&&t.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,d=>{const l=this.getResultData(e);s(d,l.data)}),u&&this.isNew&&t.on(this.CerosSDK.EVENTS.CLICKED,d=>{u(e)})})}updateResultTextbox(e,s,n,u){n.forEach(t=>{const a=this.getResultData(s),d=u?u(a.data[e]):a.data[e];t.setText(d),this.isNew&&t.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,l=>{const h=this.getResultData(s),p=u?u(h.data[e]):h.data[e];l.setText(p)})})}getResultData(e){const s=e.split("-")[0];return this.moduleDict[s][e]}}i.ModuleHandler=c}),define("modules/moduleStrategies/ProductModuleHandler",["require","exports","../constants","./ModuleHandler","../utils"],function(S,i,r,g,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ProductModuleHandler=void 0;class o extends g.ModuleHandler{constructor(s,n,u,t,a,d){super(s,n,u),this.distributor=t,this.landingPageProxy=a,this.imgLrgLink=d,this.imgLargeHotspotCollection=this.experience.findComponentsByTag(`${r.IMG_LRG}-1`)}hideModule(s,n){const u=(0,c.getModuleTag)(s,n,this.moduleName),t=this.experience.findLayersByTag(u);if(!t.layers.length){console.error(`No module found with tag: ${u}`);return}t.hide()}processLayers(s,n){s[r.IMAGE]&&this.showImageFromUrl(n,g.ModuleHandler.handleModuleImage,s[r.IMAGE],this.imageClickCallback.bind(this)),s[r.PART]&&this.updateResultTextbox(r.PART,n,s[r.PART]),s[r.SERIES]&&this.updateResultTextbox(r.SERIES,n,s[r.SERIES]),s[r.DATASHEET]&&this.registerResultClcikEvent(s[r.DATASHEET],r.DATASHEET,n),s[r.PRINT]&&this.registerResultClcikEvent(s[r.PRINT],r.PRINT,n),s[r.BUY_NOW]&&this.registerResultClcikEvent(s[r.BUY_NOW],this.distributor,n),s[r.PRODUCT_GUIDE]&&this.registerResultClcikEvent(s[r.PRODUCT_GUIDE],r.PRODUCT_GUIDE,n),s[r.SPECS]&&this.updateResultTextbox(r.SPECS,n,s[r.SPECS]),s[r.DESCRIPTION]&&this.updateResultTextbox(r.DESCRIPTION,n,s[r.DESCRIPTION])}imageClickCallback(s){const n=this.getResultData(s);this.imgLrgLink.value=n.data.image,this.imgLargeHotspotCollection.click()}registerResultClcikEvent(s,n,u){s.forEach(t=>{t.on(this.CerosSDK.EVENTS.CLICKED,()=>{const a=this.getResultData(u);this.landingPageProxy.openAndTrackLink(a.data[n],t.id)}),t.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,a=>{this.getResultData(u).data[n]||a.hide()})})}}i.ProductModuleHandler=o}),define("modules/Carousel",["require","exports","./Observer","./DoubleClickBugHandler"],function(S,i,r,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Carousel=void 0;class c{constructor(e,s,n,u,t){this.max=e,this.name=s,this.CerosSDK=n,this.experience=u,this.moduleHandler=t,this.currentPage=new r.Observable(0),this.parts=[],this.next=this.experience.findLayersByTag(`${this.name}-next`),this.back=this.experience.findLayersByTag(`${this.name}-back`),this.currentIndex=this.experience.findComponentsByTag(`${this.name}-current`),this.totalIndex=this.experience.findComponentsByTag(`${this.name}-total`),this.pages={},this.doubleClickBugHandler=new g.DoubleClickBugHandler,this.registerNavigationEvents()}init(e){this.pages={},this.parts=e,this.paginate(),this.setTotalPageIndex(),this.currentPage.value=1}paginate(){let e=0,s=1;for(;e<this.parts.length;){const n=e+this.max<this.parts.length?e+this.max:this.parts.length;this.pages[s]=this.parts.slice(e,n),e=e+this.max,s++}console.log(this.pages)}registerNavigationEvents(){this.next.on(this.CerosSDK.EVENTS.CLICKED,e=>{this.doubleClickBugHandler.isDoubleClickBug(e.id)||(this.currentPage.value++,console.log(this.currentPage.value))}),this.back.on(this.CerosSDK.EVENTS.CLICKED,e=>{this.doubleClickBugHandler.isDoubleClickBug(e.id)||this.currentPage.value--}),this.next.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,()=>{this.isLastPage()&&this.next.hide()}),this.back.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,()=>{this.isFirstPage()&&this.back.hide()}),this.currentPage.subscribe(()=>{this.hideModules(),this.updatePageIndex(),this.populate(),this.isLastPage()?this.next.hide():this.next.show(),this.isFirstPage()?this.back.hide():this.back.show()})}populate(){let e=0;const s=this.pages[this.currentPage.value];for(;e<this.max&&e<s.length;){const n=s[e];n&&this.moduleHandler.updateModule(this.max,e,n),e++}}hideModules(){let e=0;for(;e<this.max;)this.moduleHandler.hideModule(this.max,e),e++}updatePageIndex(){this.currentIndex.components.forEach(e=>e.setText(this.currentPage.value.toString()))}setTotalPageIndex(){const e=Object.keys(this.pages);this.totalIndex.components.forEach(s=>s.setText(e[e.length-1]))}isLastPage(){const e=Object.keys(this.pages);return this.currentPage.value===Number(e[e.length-1])}isFirstPage(){return this.currentPage.value===1}}i.Carousel=c}),define("modules/moduleStrategies/NavModuleHandler",["require","exports","./ModuleHandler"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NavModuleHandler=void 0;class g extends r.ModuleHandler{constructor(o,e,s,n,u){super(o,e,s),this.currentSegment=n,this.textFormat=u}processLayers(o,e){o.name&&this.updateResultTextbox("name",e,o.name,this.textFormat),o.cta&&this.registerTabChangeCta("name",e,o.cta)}selectTab(o,e){const s=this.moduleDict[e];for(const n in s){const u=s[n];u.data.name===o&&u.layers.cta.forEach(t=>{t.click(),console.log(`clicked ${o}`)})}}registerTabChangeCta(o,e,s){s.forEach(n=>{n.on(this.CerosSDK.EVENTS.CLICKED,u=>{if(this.doubleClickBugHandler.isDoubleClickBug(u.id))return;const t=this.getResultData(e);this.currentSegment.value=t.data[o]})})}}i.NavModuleHandler=g}),define("modules/moduleStrategies/TabNavHandler",["require","exports","./NavModuleHandler","../Observer"],function(S,i,r,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TabNavHandler=void 0;class c{constructor(e,s,n,u,t,a,d){this.experience=e,this.CerosSDK=s,this.showResultModule=n,this.tabTag=u,this.tabTextTag=t,this.tabKey=a,this.textFormat=d,this.segments={},this.currentSegment=new g.NonStrictObservable(""),this.navModuleHandler=new r.NavModuleHandler(u,e,s,this.currentSegment,this.textFormat),this.tabTextComponentCollection=e.findComponentsByTag(t),this.subscribeToSegmentChange()}init(e){this.segments={},this.mapSegments(e.children)}subscribeToSegmentChange(){this.currentSegment.subscribe(this.displayModules.bind(this)),this.currentSegment.subscribe(this.updateFuseTypeInfo.bind(this))}display(){this.updateNavigation(),this.triggerHotspot(this.tabTag,Object.keys(this.segments).length,3);const e=Object.keys(this.segments)[0];this.navModuleHandler.selectTab(e,Object.keys(this.segments).length.toString())}mapSegments(e){e.forEach(s=>{const n=s.data[this.tabKey].trim();this.segments[n]=this.segments[n]||{},this.segments[n].nodes=this.segments[n].nodes||[],this.segments[n].nodes.push(s)})}displayModules(){const e=this.segments[this.currentSegment.value]?this.segments[this.currentSegment.value].nodes.length:0;e?this.showResultModule(e,this.segments[this.currentSegment.value].nodes):console.log("No options in segement "+this.currentSegment.value)}updateFuseTypeInfo(){const e=this.segments[this.currentSegment.value].nodes[0].data[this.tabTextTag];this.tabTextComponentCollection.setText(e)}updateNavigation(){const e=Object.keys(this.segments).length;e&&(this.updateNavModules(e),this.triggerHotspot(this.tabTag,e,3))}updateNavModules(e){Object.keys(this.segments).forEach((n,u)=>{this.navModuleHandler.updateModule(e,u,{name:n})})}triggerHotspot(e,s,n){this.experience.findComponentsByTag(`${e}-${s<=n?s:`${n+1}+`}`).click()}isOneTab(e){const s=e[0].data[this.tabKey];return e.every(n=>n.data[this.tabKey]===s)}}i.TabNavHandler=c});var __awaiter=this&&this.__awaiter||function(S,i,r,g){function c(o){return o instanceof r?o:new r(function(e){e(o)})}return new(r||(r=Promise))(function(o,e){function s(t){try{u(g.next(t))}catch(a){e(a)}}function n(t){try{u(g.throw(t))}catch(a){e(a)}}function u(t){t.done?o(t.value):c(t.value).then(s,n)}u((g=g.apply(S,i||[])).next())})};define("modules/ResultHandler",["require","exports","./constants","./LandinPageProxy","./moduleStrategies/ProductModuleHandler","./DoubleClickBugHandler","./Carousel","./moduleStrategies/TabNavHandler"],function(S,i,r,g,c,o,e,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ResultHandler=void 0;class n{constructor(t,a,d,l,h,p,f,m){this.experience=t,this.CerosSDK=a,this.currentNodeObservable=d,this.distributor=l,this.relatedProductsLink=h,this.accessoriesLink=p,this.PapaParse=f,this.imgLrgLink=m,this.csvData={"related products":{},accessories:{}},this.doubleClickBugHandler=new o.DoubleClickBugHandler,this.pathNavigationCollection=t.findLayersByTag(`nav:${r.PART}`),this.landingPageProxy=new g.LandingPageProxy,this.resultModulesHandler=new c.ProductModuleHandler(r.RESULTS,t,a,l,this.landingPageProxy,this.imgLrgLink),this.relatedProductsModulesHandler=new c.ProductModuleHandler(r.RELATED_PRODUCTS,t,a,l,this.landingPageProxy,this.imgLrgLink),this.accessoriesModulesHandler=new c.ProductModuleHandler(r.ACCESSORIES,t,a,l,this.landingPageProxy,this.imgLrgLink),this.accessoriesCarousel=new e.Carousel(r.MAX_ACCESSORIES,r.ACCESSORIES,a,t,this.accessoriesModulesHandler),this.relatedProductsCarousel=new e.Carousel(r.MAX_RELATED_PRODUCTS,r.RELATED_PRODUCTS,a,t,this.relatedProductsModulesHandler),this.resultsCarousel=new e.Carousel(r.MAX_RESULTS,r.RESULTS,a,t,this.resultModulesHandler),this.tabNavHandler=new s.TabNavHandler(this.experience,this.CerosSDK,this.showPath2Results.bind(this),r.TAB,"","max current",this.formatTabText)}formatTabText(t){return`${t}A`}displayPathNavigation(t){this.pathNavigationCollection.layers.forEach(a=>{a.getPayload().trim()===t?a.show():a.hide()})}showResultModule(t,a){a===r.PATH2?(this.tabNavHandler.init(this.currentNodeObservable.value),this.tabNavHandler.isOneTab(this.currentNodeObservable.value.children)&&this.showPath1Results(t),this.tabNavHandler.display()):this.showPath1Results(t)}showPath1Results(t){this.updateResultModules(t,this.currentNodeObservable.value.children),this.triggerHotspot(r.RESULTS,t,r.MAX_RESULTS)}showPath2Results(t,a){this.updateResultModules(t,a),this.triggerHotspot(r.RESULTS,t,r.MAX_RESULTS)}sortNodesBySales(t){return t.sort((a,d)=>{const l=isNaN(Number(a.data.sales))?0:Number(a.data.sales);return(isNaN(Number(d.data.sales))?0:Number(d.data.sales))-l})}updateResultModules(t,a){const d=this.sortNodesBySales(a);d.length<=r.MAX_RESULTS?d.forEach((l,h)=>{this.resultModulesHandler.updateModule(t,h,l.data,this.processOverlayLayers.bind(this))}):this.resultsCarousel.init(d.map(l=>l.data))}processOverlayLayers(t,a){t[r.RELATED_PRODUCTS]&&this.handleOverlay(r.RELATED_PRODUCTS,t[r.RELATED_PRODUCTS],a,this.relatedProductsLink),t[r.ACCESSORIES]&&this.handleOverlay(r.ACCESSORIES,t[r.ACCESSORIES],a,this.accessoriesLink)}updateRelatedProductsModules(t){t.length<=r.MAX_RELATED_PRODUCTS?t.forEach((a,d)=>{this.relatedProductsModulesHandler.updateModule(t.length,d,a)}):this.relatedProductsCarousel.init(t)}updateAccessoriesModules(t){t.length<=r.MAX_ACCESSORIES?t.forEach((a,d)=>{this.accessoriesModulesHandler.updateModule(t.length,d,a)}):this.accessoriesCarousel.init(t)}handleOverlay(t,a,d,l){a.forEach(h=>{this.registerOverlayAnimation(h,d,t),this.registerOverlayClick(h,d,t,l)})}registerOverlayAnimation(t,a,d){t.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,l=>{if(this.getPartNumbers(a,d).length===0)l.hide();else if(d===r.ACCESSORIES){const p=!!this.getPartNumbers(a,r.RELATED_PRODUCTS).length,f=!!this.getValue(a,r.PRODUCT_GUIDE);p||f?l.getTags().find(m=>m==="pos:1")&&l.hide():l.getTags().find(m=>m==="pos:2")&&l.hide()}})}registerOverlayClick(t,a,d,l){t.on(this.CerosSDK.EVENTS.CLICKED,h=>__awaiter(this,void 0,void 0,function*(){if(this.doubleClickBugHandler.isDoubleClickBug(h.id))return;const p=this.getPartNumbers(a,d);if(!p.length)return;yield this.loadCsvData(d,l);const f=this.getExistingParts(d,p);f.length&&(d===r.RELATED_PRODUCTS?(this.updateRelatedProductsModules(f),this.triggerHotspot(d,f.length,r.MAX_RELATED_PRODUCTS)):d===r.ACCESSORIES&&(this.updateAccessoriesModules(f),this.triggerHotspot(d,f.length,r.MAX_ACCESSORIES)))}))}triggerHotspot(t,a,d){this.experience.findComponentsByTag(`${t}-${a<=d?a:`${d+1}+`}`).click()}getPartNumbers(t,a){const d=this.getValue(t,a);return d?d.split(r.DIVIDER).map(l=>l.replace(" ","")):[]}getValue(t,a){return this.resultModulesHandler.getResultData(t).data[a]}getExistingParts(t,a){const d=[];return a.forEach(l=>{this.csvData[t][l]?d.push(this.csvData[t][l]):console.error(`could not find part: ${l} from ${t}!`)}),d}loadCsvData(t,a){return new Promise((d,l)=>{this.csvData[t]&&Object.keys(this.csvData[t]).length>0?d(this.csvData[t]):this.PapaParse.parse(a,{header:!0,download:!0,complete:h=>{const p=this.indexByPartNumber(h.data);this.csvData[t]=p,d(this.csvData[t])},error:h=>l(h)})})}indexByPartNumber(t){const a={};return t.forEach(d=>{a[d.part.trim()]=d}),a}}i.ResultHandler=n}),define("modules/questionStrategies/QuestionStrategy",["require","exports","../constants","../Observer"],function(S,i,r,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.QuestionStrategy=void 0;class c{constructor(e,s,n){this.name=e,this.experience=s,this.CerosSDK=n,this.key="value",this.optionsCollection=s.findComponentsByTag(`q:${e}`),this.pathNavigationCollection=s.findLayersByTag(`nav:${e}`),this.selectedOption=new g.NonStrictObservable(`${e}:${this.key}:`)}displayPathNavigation(e){e===r.PATH2?this.experience.findComponentsByTag("show-path2-nav").click():this.experience.findComponentsByTag("show-path1-nav").click()}}i.QuestionStrategy=c}),define("modules/questionStrategies/MaskingOptionsStrategy",["require","exports","./QuestionStrategy"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MaskingOptionsStrategy=void 0;class g extends r.QuestionStrategy{constructor(o,e,s,n){super(o,e,s),this.currentNodeObservable=n,this.key="value",this.maskCollection=this.experience.findLayersByTag(`mask:${this.name}`),this.registerCerosEvents()}registerCerosEvents(){this.optionsCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleOptionClick.bind(this))}handleOptionClick(o){const e=o.getPayload().trim()||"",s=this.selectedOption.value.split(":");s[1]=this.key,s[2]=e,this.selectedOption.value=s.join(":")}displayAnswerOptions(o){this.maskCollection.layers.forEach(e=>{this.handleMasks(e,o)})}handleMasks(o,e){e.findChildByValueProperty(o.getPayload().trim())?o.hide():o.show()}registerMaskAnimations(){this.maskCollection.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,o=>{this.handleMasks(o,this.currentNodeObservable.value)})}}i.MaskingOptionsStrategy=g}),define("modules/questionStrategies/MaskOptionsStrateyWithMultipleCellValues",["require","exports","./MaskingOptionsStrategy"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MaskingOptionsStrategyWithMultipleCellValues=void 0;class g extends r.MaskingOptionsStrategy{handleMasks(o,e){e.findChildThatIncludesValue(o.getPayload().trim())?o.hide():o.show()}}i.MaskingOptionsStrategyWithMultipleCellValues=g}),define("modules/questionStrategies/MaskingOptionsWithSubCategoriesStrategy",["require","exports","./MaskingOptionsStrategy"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MaskingOptionsWithSubcategoriesStrategy=void 0;class g extends r.MaskingOptionsStrategy{displayAnswerOptions(o){console.log(o.name),this.experience.findLayersByTag(`cat:${o.children[0].name}`).layers.forEach(s=>{s.getPayload().trim()===o.value?s.show():s.hide()}),this.maskCollection.layers.forEach(s=>{this.handleMasks(s,o)})}}i.MaskingOptionsWithSubcategoriesStrategy=g}),define("modules/questionStrategies/HidingOptionsStrategy",["require","exports","./QuestionStrategy"],function(S,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.HidingOptionsStrategy=void 0;class g extends r.QuestionStrategy{constructor(o,e,s){super(o,e,s),this.key="elementId",this.isMobile=this.experience.findComponentsByTag("mobile").components.length>0,this.isTablet=this.experience.findComponentsByTag("tablet").components.length>0,this.evenOptions=this.experience.findLayersByTag(`${o.toLowerCase()}_even`),this.oddOptions=this.experience.findLayersByTag(`${o.toLowerCase()}_odd`),this.registerCerosEvents()}registerCerosEvents(){this.optionsCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleOptionClick.bind(this))}handleOptionClick(o){const e=o.id,s=this.selectedOption.value.split(":");s[1]=this.key,s[2]=e,this.selectedOption.value=s.join(":")}displayAnswerOptions(o){const e=o.children.sort((s,n)=>Number(s.value)-Number(n.value));this.isMobile||this.isTablet?console.log("MOBILE LAYOUT!"):this.displayDesktopLayoutOptions(e)}displayDesktopLayoutOptions(o){o.length%2===0?(this.oddOptions.hide(),this.evenOptions.show(),this.handleTextOptions(this.evenOptions,o)):(this.oddOptions.show(),this.evenOptions.hide(),this.handleTextOptions(this.oddOptions,o))}handleTextOptions(o,e){const s=o.layers[0].findAllComponents(),n=s.layersByTag.answer.length,u=Math.floor((n-e.length)/2);let t=0;s.components.forEach(a=>{if(a.type==="text"){const d=t-u;t>=u&&d<e.length?(a.setText(e[d].value),e[d].elementId=a.id):a.hide(),t++}else a.type==="line"&&this.handleLineDivider(a,u,e)})}handleLineDivider(o,e,s){const n=isNaN(Number(o.getPayload()))?null:Number(o.getPayload());n?n>e&&n-e<s.length||o.hide():console.error(`there is no position number in payload of divider line with id ${o.id} in question ${s[0].name}`)}}i.HidingOptionsStrategy=g}),define("modules/questionStrategies/SliderOptionsStrategy",["require","exports","../Observer","./QuestionStrategy"],function(S,i,r,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SliderOptionsStrategy=void 0;class c extends g.QuestionStrategy{constructor(e,s,n){super(e,s,n),this.currentIndex=new r.Observable(0),this.sliderValues=[],this.nextButtonMask=s.findLayersByTag(`${e}-mask`),this.nextButton=s.findLayersByTag(`${e}-next`),this.singleOptionCollection=s.findLayersByTag("single-option"),this.sliderContainer=document.getElementById("slider-container"),this.output=document.getElementById("slider-value"),this.slider=null,this.registerCerosEvents(),this.subscribeToObservables()}subscribeToObservables(){this.currentIndex.subscribe(this.handleNextButtonDisplay.bind(this)),this.currentIndex.subscribe(this.updateSliderBackground.bind(this)),this.currentIndex.subscribe(this.updateSliderValuePosition.bind(this))}registerCerosEvents(){this.optionsCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleOptionClick.bind(this))}handleNextButtonDisplay(e){e>0?(this.nextButtonMask.hide(),this.nextButton.show()):(this.nextButton.hide(),this.nextButtonMask.show())}handleOptionClick(e){const s=this.sliderValues.length===2?this.sliderValues[1].toString():this.sliderValues[this.currentIndex.value].toString(),n=this.selectedOption.value.split(":");n[1]=this.key,n[2]=s,this.selectedOption.value=n.join(":")}getSliderContainer(){return this.sliderContainer}getOutput(){return this.output}displayAnswerOptions(e){const s=e.children.map(n=>Number(n.value));if(this.slider&&(this.slider.remove(),this.slider=null),this.sliderContainer&&this.output)this.displayOutput(s,this.sliderContainer,this.output);else{const n=setInterval(()=>{const u=document.getElementById("slider-container"),t=document.getElementById("slider-value");u&&t&&(clearInterval(n),this.sliderContainer=u,this.output=t,this.displayOutput(s,this.sliderContainer,this.output))},200)}}displayOutput(e,s,n){this.sliderValues=[0,...e],console.log(this.sliderValues),e.length>1?(this.singleOptionCollection.hide(),this.displaySlider(s,n),this.slider&&(this.currentIndex.value=0,this.slider.style.display="block",this.output&&(this.output.style.display="block"),this.handleNextButtonDisplay(this.currentIndex.value))):(this.slider&&(this.slider.style.display="none"),this.output&&(this.output.style.display="none"),this.nextButton.hide(),this.nextButtonMask.hide(),this.displaySingleOption(e))}displaySingleOption(e){this.singleOptionCollection.layers.forEach(s=>s.setText(`${e[0]}`)),this.singleOptionCollection.show()}displaySlider(e,s){this.registerNewSlider(e,s)}registerNewSlider(e,s){const n=this.getSlider(e);this.slider=n,this.slider.addEventListener("input",u=>{const t=u.target;t&&!isNaN(Number(t.value))&&(this.currentIndex.value=parseInt(t.value,10))}),this.updateSliderValuePosition()}updateSliderValuePosition(){if(console.log(`index: ${this.currentIndex.value}`),console.log(`value: ${this.sliderValues[this.currentIndex.value]}`),this.slider&&this.output){const e=this.currentIndex.value/(this.sliderValues.length-1),s=this.slider.offsetWidth,n=32,u=this.slider.offsetLeft,t=e*(s-n)+n/2;this.output.style.left=`${u+t}px`,this.output.textContent=this.currentIndex.value===0?"A":`${this.sliderValues[this.currentIndex.value]}A`}}updateSliderBackground(){if(this.slider){const e=this.currentIndex.value/(this.sliderValues.length-1)*100,s=`linear-gradient(to right, #5CC883 0%, #008752 ${e}%, #ccc ${e}%, #ccc 100%)`;this.slider.style.background=s}}getSlider(e){const s=e.querySelector("#customSlider");if(s)return s;{const n=this.createSlider(this.sliderValues.length-1);return e.prepend(n),n}}createSlider(e){const s=document.createElement("input");return s.type="range",s.id="customSlider",s.min="0",s.max=e.toString(),s.value="0",s}}i.SliderOptionsStrategy=c}),define("modules/moduleStrategies/PartModuleHandler",["require","exports","./ModuleHandler","../constants","../utils"],function(S,i,r,g,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PartModuleHandler=void 0;class o extends r.ModuleHandler{constructor(s,n,u,t,a){super(s,n,u),this.qName=t,this.selectedOption=a}processLayers(s,n){console.log("proccessing part layers"),s[g.IMAGE]&&this.showImageFromUrl(n,this.displayPartImage.bind(this),s[g.IMAGE]),s[this.qName]&&this.updateResultTextbox(this.qName,n,s[this.qName]),s[g.FUSE_STYLE_INFO]&&this.updateResultTextbox(g.FUSE_STYLE_INFO,n,s[g.FUSE_STYLE_INFO]),s[`q:${this.qName}`]&&this.registerOptionClick(this.qName,n,s[`q:${this.qName}`])}registerOptionClick(s,n,u){u.forEach(t=>{t.on(this.CerosSDK.EVENTS.CLICKED,()=>{const d=this.getResultData(n).data[s],l=this.selectedOption.value.split(":");l[2]=d,this.selectedOption.value=l.join(":")})})}displayPartImage(s,n){const u=n[`${this.qName.split("-")[0]} image`];(0,c.setImageUrl)(u,s)}}i.PartModuleHandler=o}),define("modules/questionStrategies/SegmentedOptionsStrategy",["require","exports","../constants","../moduleStrategies/PartModuleHandler","./QuestionStrategy","../moduleStrategies/TabNavHandler"],function(S,i,r,g,c,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SegmentedOptionsStrategy=void 0;class e extends c.QuestionStrategy{constructor(n,u,t){super(n,u,t),this.partModuleHandler=new g.PartModuleHandler(r.PARTS,u,t,n,this.selectedOption),this.tabNavHandler=new o.TabNavHandler(u,t,this.showResultModules.bind(this),r.SEGMENTS,r.FUSE_TYPE_INFO,`fuse type-${r.PATH2}`)}displayAnswerOptions(n){this.tabNavHandler.init(n),this.tabNavHandler.display()}showResultModules(n,u){this.updateResultModules(n,u),this.triggerHotspot(r.PARTS,n,3)}updateResultModules(n,u){u.forEach((t,a)=>{this.partModuleHandler.updateModule(n,a,t.data)})}triggerHotspot(n,u,t){this.experience.findComponentsByTag(`${n}-${u<=t?u:`${t+1}+`}`).click()}}i.SegmentedOptionsStrategy=e}),define("modules/questionStrategies/QuestionStrategyFactory",["require","exports","./MaskingOptionsStrategy","./MaskOptionsStrateyWithMultipleCellValues","./MaskingOptionsWithSubCategoriesStrategy","./HidingOptionsStrategy","./SliderOptionsStrategy","./SegmentedOptionsStrategy"],function(S,i,r,g,c,o,e,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.QuestionStrategyFactory=void 0;class n{static create(t,a,d,l,h){switch(a.questionStrategy){case"hiding":return new o.HidingOptionsStrategy(t,d,h);case"masking-with-subcategories":return new c.MaskingOptionsWithSubcategoriesStrategy(t,d,h,l);case"masking-with-mulitiple-cell-values":return new g.MaskingOptionsStrategyWithMultipleCellValues(t,d,h,l);case"slider":return new e.SliderOptionsStrategy(t,d,h);case"segments":return new s.SegmentedOptionsStrategy(t,d,h);case"masking":default:return new r.MaskingOptionsStrategy(t,d,h,l)}}}i.QuestionStrategyFactory=n});var __awaiter=this&&this.__awaiter||function(S,i,r,g){function c(o){return o instanceof r?o:new r(function(e){e(o)})}return new(r||(r=Promise))(function(o,e){function s(t){try{u(g.next(t))}catch(a){e(a)}}function n(t){try{u(g.throw(t))}catch(a){e(a)}}function u(t){t.done?o(t.value):c(t.value).then(s,n)}u((g=g.apply(S,i||[])).next())})};define("modules/QuizContext",["require","exports","./constants","./lib/NodeTree","./Observer","./utils","./ResultHandler","./DoubleClickBugHandler","./moduleStrategies/ProductModuleHandler","./questionStrategies/QuestionStrategyFactory","./moduleStrategies/ModuleHandler"],function(S,i,r,g,c,o,e,s,n,u,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.QuizContext=void 0;class a{constructor(l,h,p,f,m,y,C,T){this.CerosSDK=l,this.experience=h,this.distributor=f,this.relatedProductsLink=m,this.accessoriesLink=y,this.PapaParse=C,this.path2Link=T,this.questions={},this.imgLargeOverlayCollection=this.experience.findLayersByTag(r.IMG_LRG),this.imgLrgLink=new c.Observable(""),this.imgLrgCloseHotspotCollection=this.experience.findLayersByTag(`${r.IMG_LRG}-close`),this.path2NodeTree=null,this.currentTree=p,this.path1NodeTree=p,this.currentNode=new c.Observable(p.root),this.backLayersCollection=this.experience.findLayersByTag(r.BACK),this.navCollecttion=this.experience.findComponentsByTag(r.NAV),this.pathTextCollection=this.experience.findComponentsByTag(r.PATH),this.resetCollection=this.experience.findLayersByTag(r.RESET),this.mcaseAdapterCtaCollection=this.experience.findLayersByTag(`${r.MCASE_ADAPTER}-cta`),this.resultHandler=new e.ResultHandler(h,l,this.currentNode,f,m,y,C,this.imgLrgLink),this.mcaseAdapterModuleHandler=new n.ProductModuleHandler(r.MCASE_ADAPTER,h,l,f,this.resultHandler.landingPageProxy,this.imgLrgLink),this.doubleClickHandler=new s.DoubleClickBugHandler,this.init()}init(){this.subscribeCurrentNodeObserver(),this.subscribeToCerosEvents(),this.assignQuestionsStrategy(),this.registerImageOverlay()}registerImageOverlay(){this.imgLargeOverlayCollection.on(this.CerosSDK.EVENTS.ANIMATION_STARTED,l=>{t.ModuleHandler.handleModuleImage(l,{image:this.imgLrgLink.value})}),this.imgLrgCloseHotspotCollection.on(this.CerosSDK.EVENTS.CLICKED,()=>{this.imgLrgLink.value=""}),this.imgLrgLink.subscribe(l=>{this.imgLargeOverlayCollection.layers.forEach(h=>{t.ModuleHandler.handleModuleImage(h,{image:l})})})}subscribeCurrentNodeObserver(){this.currentNode.subscribe(this.handleNodeChange.bind(this)),this.currentNode.subscribe(this.updatePath.bind(this))}assignQuestionsStrategy(){for(const l in r.fieldNodesDict){const h=r.fieldNodesDict[l];if(h.type==="question"){const p=u.QuestionStrategyFactory.create(l,h,this.experience,this.currentNode,this.CerosSDK);this.questions[l]=p,p.selectedOption.subscribe(this.handleSelectedAnswer.bind(this))}}}subscribeToCerosEvents(){this.backLayersCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleBackNavigation.bind(this)),this.navCollecttion.on(this.CerosSDK.EVENTS.CLICKED,this.handleRandomNavigation.bind(this)),this.resetCollection.on(this.CerosSDK.EVENTS.CLICKED,this.resetQuiz.bind(this)),this.mcaseAdapterCtaCollection.on(this.CerosSDK.EVENTS.CLICKED,this.handleMcaseAdapter.bind(this))}handleMcaseAdapter(l){return __awaiter(this,void 0,void 0,function*(){if(this.doubleClickHandler.isDoubleClickBug(l.id))return;const h=l.getPayload().trim();yield this.resultHandler.loadCsvData(r.RELATED_PRODUCTS,this.relatedProductsLink);const p=this.resultHandler.csvData[r.RELATED_PRODUCTS][h];p?(this.mcaseAdapterModuleHandler.updateModule(1,0,p),this.experience.findComponentsByTag(`${r.MCASE_ADAPTER}-1`).click()):console.error(`Could not find part ${h} in related products sheet`)})}resetQuiz(){this.currentNode.value=this.currentTree.root}handleSelectedAnswer(l){return __awaiter(this,void 0,void 0,function*(){const[h,p,f]=l.split(":");h==="fuse type"&&(f.toLowerCase()==="guide me"?this.currentTree=yield this.loadCsvDataIntoNodeTree():this.currentTree=this.path1NodeTree,this.currentNode.value=this.currentTree.root);const m=this.currentTree.findChild(this.currentNode.value,p,f);m?this.updateCurrentNodeValue(m,h,f):console.error(`coudn't find node with ${h} and value ${f}`)})}updateCurrentNodeValue(l,h,p){r.fieldNodesDict[h].skipif&&r.fieldNodesDict[h].skipif.find(f=>f===p)&&l.children.length?this.currentNode.value=l.children[0]:this.currentNode.value=l}loadCsvDataIntoNodeTree(){if(this.path2NodeTree)return Promise.resolve(this.path2NodeTree);const l=new g.NodeTree(r.fieldNodesDict);return new Promise((h,p)=>{this.PapaParse.parse(this.path2Link,{header:!0,download:!0,complete:f=>{l.buildTree(f.data,r.path2Fields),l.mergeDataWithFields(this.path1NodeTree,l.root,r.transitionFields),this.path2NodeTree=l,h(l)},error:f=>p(f)})})}handleBackNavigation(l){if(this.doubleClickHandler.isDoubleClickBug(l.id))return;const h=this.currentNode.value,p=h.parent;if(!p)return;const f=h.name;console.log(`clicked back to ${h.name}`);const m=r.fieldNodesDict[f];if(m&&m.skipBackIf){const y=m.skipBackIf,C=Object.keys(y)[0],T=y[C],b=h.findParentByName(C);if(b&&T.find(E=>E===b.value)){this.currentNode.value=p.parent||p;return}}this.currentNode.value=p}handleRandomNavigation(l){if(this.doubleClickHandler.isDoubleClickBug(l.id))return;const h=l.getPayload().toLowerCase(),p=this.currentNode.value.findParentByName(h);p&&p.parent?this.currentNode.value=p.parent:console.error(`Could not find node ${h} or it's parent`)}handleNodeChange(l){if(l.children.length){if(this.isLastQuestion(l)){const h=this.currentTree===this.path1NodeTree?r.PATH1:r.PATH2;this.resultHandler.showResultModule(l.children.length,h),this.handlePathNavigation(this.resultHandler)}else{const h=l.children[0].name.toLowerCase(),p=this.questions[h];p&&(p.displayAnswerOptions(l),this.handlePathNavigation(p))}console.log(this.currentNode.value)}}handlePathNavigation(l){this.currentTree===this.path2NodeTree?l.displayPathNavigation(r.PATH2):l.displayPathNavigation(r.PATH1)}updatePath(l){let h=l;const p=[];h.getPath().forEach(({name:m,value:y})=>{if(m==="Root")return;const T=(m==="fuse type"&&this.currentTree===this.path2NodeTree?"{{}}":r.fieldNodesDict[m].pathText).replace("{{}}",(0,o.capitalize)(y));p.push(T)}),p.length?this.pathTextCollection.setText(p.join("  >  ")):this.pathTextCollection.setText(""),this.pathTextCollection.show()}isLastQuestion(l){return l.children[0].name==="part"}}i.QuizContext=a});const script=document.getElementById("fuse-holders");if(script===null)throw Error("Could not find script fuse-holders");const link=script.getAttribute("data-link")||"",distributor=script.getAttribute("data-distributor")||"",relatedProductsLink=script.getAttribute("data-related-products")||"",accessoriesLink=script.getAttribute("data-accessories")||"",path2Link=script.getAttribute("data-path2")||"";typeof require<"u"&&typeof require=="function"&&(require.config({baseUrl:"http://127.0.0.1:5173/",paths:{CerosSDK:"//sdk.ceros.com/standalone-player-sdk-v5.min",PapaParse:"https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min"}}),require(["CerosSDK","PapaParse","modules/QuizContext","modules/lib/NodeTree","modules/constants","modules/utils"],function(S,i,r,g,c,o){S.findExperience().done(e=>{const s=o.stepsFromFieldNames(c.path1Fields,c.fieldNodesDict),n=new g.NodeTree(s);i.parse(link,{download:!0,header:!0,complete:u=>{n.buildTree(u.data,c.path1Fields),new r.QuizContext(S,e,n,distributor,relatedProductsLink,accessoriesLink,i,path2Link)}})}).fail(e=>{console.log(e)})})),define("main",function(){});
